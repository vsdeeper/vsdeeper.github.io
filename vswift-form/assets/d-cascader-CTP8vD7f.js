import{L as Va,d as ie,M as de,h as Pa,N as $e,K as La,k as fe,O as ta,P as na,Q as Ma,R as sa,S as m,T as W,o as f,i as I,B as G,b as F,U as ve,w as M,J as ce,e as J,V as T,F as ue,W as la,X as oa,Y as Da,v as S,r as me,f as Oe,Z as le,$ as Ne,a0 as Ia,a1 as De,a2 as qe,a3 as Fa,a4 as Ue,a5 as Re,a6 as ge,a7 as ia,a8 as oe,a9 as Ba,aa as za,ab as Ee,ac as we,ad as xa,ae as We,x as se,af as Ha,ag as ca,ah as re,ai as ra,aj as Aa,ak as D,al as Ce,am as ua,an as da,ao as Ka,ap as Oa,aq as qa,ar as Ze,as as Ua,at as Ra,au as Wa,av as Za,aw as ja,ax as Ga,ay as Ja,az as Xa,aA as Ya,aB as Qa,aC as et,aD as ke,g as c,aE as at,E as tt,aF as nt,aG as st,aH as je,l as Ge,aI as lt,aJ as ot,aK as it,y as ct,aL as Je,aM as rt,G as Xe,u as ut,aN as dt}from"./index-BaHOnCAb.js";import{b as pt}from"./index-SDKz7jif.js";import{u as Ye,c as Qe}from"./arrays-D7PH7fAW.js";import{c as pa}from"./cloneDeep-CeLBvq3r.js";var ht=1/0;function ft(e){var t=e==null?0:e.length;return t?Va(e,ht):[]}var vt=ie({name:"NodeContent",setup(){return{ns:de("cascader-node")}},render(){const{ns:e}=this,{node:t,panel:s}=this.$parent,{data:n,label:l}=t,{renderLabelFn:p}=s;return Pa("span",{class:e.e("label")},p?p({node:t,data:n}):l)}});const Fe=Symbol(),mt=ie({name:"ElCascaderNode",components:{ElCheckbox:La,ElRadio:pt,NodeContent:vt,ElIcon:fe,Check:ta,Loading:na,ArrowRight:Ma},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:t}){const s=sa(Fe),n=de("cascader-node"),l=m(()=>s.isHoverMenu),p=m(()=>s.config.multiple),u=m(()=>s.config.checkStrictly),v=m(()=>{var C;return(C=s.checkedNodes[0])==null?void 0:C.uid}),d=m(()=>e.node.isDisabled),b=m(()=>e.node.isLeaf),k=m(()=>u.value&&!b.value||!d.value),V=m(()=>te(s.expandingNode)),P=m(()=>u.value&&s.checkedNodes.some(te)),te=C=>{var $;const{level:U,uid:ne}=e.node;return(($=C==null?void 0:C.pathNodes[U-1])==null?void 0:$.uid)===ne},q=()=>{V.value||s.expandNode(e.node)},x=C=>{const{node:$}=e;C!==$.checked&&s.handleCheckChange($,C)},z=()=>{s.lazyLoad(e.node,()=>{b.value||q()})},H=C=>{l.value&&(Z(),!b.value&&t("expand",C))},Z=()=>{const{node:C}=e;!k.value||C.loading||(C.loaded?q():z())},L=()=>{l.value&&!b.value||(b.value&&!d.value&&!u.value&&!p.value?_(!0):Z())},j=C=>{u.value?(x(C),e.node.loaded&&q()):_(C)},_=C=>{e.node.loaded?(x(C),!u.value&&q()):z()};return{panel:s,isHoverMenu:l,multiple:p,checkStrictly:u,checkedNodeId:v,isDisabled:d,isLeaf:b,expandable:k,inExpandingPath:V,inCheckedPath:P,ns:n,handleHoverExpand:H,handleExpand:Z,handleClick:L,handleCheck:_,handleSelectCheck:j}}});function gt(e,t,s,n,l,p){const u=W("el-checkbox"),v=W("el-radio"),d=W("check"),b=W("el-icon"),k=W("node-content"),V=W("loading"),P=W("arrow-right");return f(),I("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!e.isLeaf,"aria-owns":e.isLeaf?null:e.menuId,"aria-expanded":e.inExpandingPath,tabindex:e.expandable?-1:void 0,class:T([e.ns.b(),e.ns.is("selectable",e.checkStrictly),e.ns.is("active",e.node.checked),e.ns.is("disabled",!e.expandable),e.inExpandingPath&&"in-active-path",e.inCheckedPath&&"in-checked-path"]),onMouseenter:e.handleHoverExpand,onFocus:e.handleHoverExpand,onClick:e.handleClick},[G(" prefix "),e.multiple?(f(),F(u,{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:e.isDisabled,onClick:ve(()=>{},["stop"]),"onUpdate:modelValue":e.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onClick","onUpdate:modelValue"])):e.checkStrictly?(f(),F(v,{key:1,"model-value":e.checkedNodeId,label:e.node.uid,disabled:e.isDisabled,"onUpdate:modelValue":e.handleSelectCheck,onClick:ve(()=>{},["stop"])},{default:M(()=>[G(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),ce("span")]),_:1},8,["model-value","label","disabled","onUpdate:modelValue","onClick"])):e.isLeaf&&e.node.checked?(f(),F(b,{key:2,class:T(e.ns.e("prefix"))},{default:M(()=>[J(d)]),_:1},8,["class"])):G("v-if",!0),G(" content "),J(k),G(" postfix "),e.isLeaf?G("v-if",!0):(f(),I(ue,{key:3},[e.node.loading?(f(),F(b,{key:0,class:T([e.ns.is("loading"),e.ns.e("postfix")])},{default:M(()=>[J(V)]),_:1},8,["class"])):(f(),F(b,{key:1,class:T(["arrow-right",e.ns.e("postfix")])},{default:M(()=>[J(P)]),_:1},8,["class"]))],64))],42,["id","aria-haspopup","aria-owns","aria-expanded","tabindex","onMouseenter","onFocus","onClick"])}var bt=$e(mt,[["render",gt],["__file","node.vue"]]);const yt=ie({name:"ElCascaderMenu",components:{Loading:na,ElIcon:fe,ElScrollbar:la,ElCascaderNode:bt},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const t=Ia(),s=de("cascader-menu"),{t:n}=oa(),l=Da();let p=null,u=null;const v=sa(Fe),d=S(null),b=m(()=>!e.nodes.length),k=m(()=>!v.initialLoaded),V=m(()=>`${l.value}-${e.index}`),P=z=>{p=z.target},te=z=>{if(!(!v.isHoverMenu||!p||!d.value))if(p.contains(z.target)){q();const H=t.vnode.el,{left:Z}=H.getBoundingClientRect(),{offsetWidth:L,offsetHeight:j}=H,_=z.clientX-Z,C=p.offsetTop,$=C+p.offsetHeight;d.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${_} ${C} L${L} 0 V${C} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${_} ${$} L${L} ${j} V${$} Z" />
        `}else u||(u=window.setTimeout(x,v.config.hoverThreshold))},q=()=>{u&&(clearTimeout(u),u=null)},x=()=>{d.value&&(d.value.innerHTML="",q())};return{ns:s,panel:v,hoverZone:d,isEmpty:b,isLoading:k,menuId:V,t:n,handleExpand:P,handleMouseMove:te,clearHoverZone:x}}});function kt(e,t,s,n,l,p){const u=W("el-cascader-node"),v=W("loading"),d=W("el-icon"),b=W("el-scrollbar");return f(),F(b,{key:e.menuId,tag:"ul",role:"menu",class:T(e.ns.b()),"wrap-class":e.ns.e("wrap"),"view-class":[e.ns.e("list"),e.ns.is("empty",e.isEmpty)],onMousemove:e.handleMouseMove,onMouseleave:e.clearHoverZone},{default:M(()=>{var k;return[(f(!0),I(ue,null,me(e.nodes,V=>(f(),F(u,{key:V.uid,node:V,"menu-id":e.menuId,onExpand:e.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),e.isLoading?(f(),I("div",{key:0,class:T(e.ns.e("empty-text"))},[J(d,{size:"14",class:T(e.ns.is("loading"))},{default:M(()=>[J(v)]),_:1},8,["class"]),Oe(" "+le(e.t("el.cascader.loading")),1)],2)):e.isEmpty?(f(),I("div",{key:1,class:T(e.ns.e("empty-text"))},[Ne(e.$slots,"empty",{},()=>[Oe(le(e.t("el.cascader.noData")),1)])],2)):(k=e.panel)!=null&&k.isHoverMenu?(f(),I("svg",{key:2,ref:"hoverZone",class:T(e.ns.e("hover-zone"))},null,2)):G("v-if",!0)]}),_:3},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var Ct=$e(yt,[["render",kt],["__file","menu.vue"]]);let Nt=0;const Et=e=>{const t=[e];let{parent:s}=e;for(;s;)t.unshift(s),s=s.parent;return t};class pe{constructor(t,s,n,l=!1){this.data=t,this.config=s,this.parent=n,this.root=l,this.uid=Nt++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:p,label:u,children:v}=s,d=t[v],b=Et(this);this.level=l?0:n?n.level+1:1,this.value=t[p],this.label=t[u],this.pathNodes=b,this.pathValues=b.map(k=>k.value),this.pathLabels=b.map(k=>k.label),this.childrenData=d,this.children=(d||[]).map(k=>new pe(k,s,this)),this.loaded=!s.lazy||this.isLeaf||!De(d)}get isDisabled(){const{data:t,parent:s,config:n}=this,{disabled:l,checkStrictly:p}=n;return(qe(l)?l(t,this):!!t[l])||!p&&(s==null?void 0:s.isDisabled)}get isLeaf(){const{data:t,config:s,childrenData:n,loaded:l}=this,{lazy:p,leaf:u}=s,v=qe(u)?u(t,this):t[u];return Fa(v)?p&&!l?!1:!(Ue(n)&&n.length):!!v}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(t){const{childrenData:s,children:n}=this,l=new pe(t,this.config,this);return Ue(s)?s.push(t):this.childrenData=[t],n.push(l),l}calcText(t,s){const n=t?this.pathLabels.join(s):this.label;return this.text=n,n}broadcast(t,...s){const n=`onParent${Re(t)}`;this.children.forEach(l=>{l&&(l.broadcast(t,...s),l[n]&&l[n](...s))})}emit(t,...s){const{parent:n}=this,l=`onChild${Re(t)}`;n&&(n[l]&&n[l](...s),n.emit(t,...s))}onParentCheck(t){this.isDisabled||this.setCheckState(t)}onChildCheck(){const{children:t}=this,s=t.filter(l=>!l.isDisabled),n=s.length?s.every(l=>l.checked):!1;this.setCheckState(n)}setCheckState(t){const s=this.children.length,n=this.children.reduce((l,p)=>{const u=p.checked?1:p.indeterminate?.5:0;return l+u},0);this.checked=this.loaded&&this.children.filter(l=>!l.isDisabled).every(l=>l.loaded&&l.checked)&&t,this.indeterminate=this.loaded&&n!==s&&n>0}doCheck(t){if(this.checked===t)return;const{checkStrictly:s,multiple:n}=this.config;s||!n?this.checked=t:(this.broadcast("check",t),this.setCheckState(t),this.emit("check"))}}const Ie=(e,t)=>e.reduce((s,n)=>(n.isLeaf?s.push(n):(!t&&s.push(n),s=s.concat(Ie(n.children,t))),s),[]);class ea{constructor(t,s){this.config=s;const n=(t||[]).map(l=>new pe(l,this.config));this.nodes=n,this.allNodes=Ie(n,!1),this.leafNodes=Ie(n,!0)}getNodes(){return this.nodes}getFlattedNodes(t){return t?this.leafNodes:this.allNodes}appendNode(t,s){const n=s?s.appendChild(t):new pe(t,this.config);s||this.nodes.push(n),this.allNodes.push(n),n.isLeaf&&this.leafNodes.push(n)}appendNodes(t,s){t.forEach(n=>this.appendNode(n,s))}getNodeByValue(t,s=!1){return!t&&t!==0?null:this.getFlattedNodes(s).find(l=>ge(l.value,t)||ge(l.pathValues,t))||null}getSameNode(t){return t&&this.getFlattedNodes(!1).find(({value:n,level:l})=>ge(t.value,n)&&t.level===l)||null}}const ha=ia({modelValue:{type:oe([Number,String,Array])},options:{type:oe(Array),default:()=>[]},props:{type:oe(Object),default:()=>({})}}),wt={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:Ba,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},$t=e=>m(()=>({...wt,...e.props})),aa=e=>{if(!e)return 0;const t=e.id.split("-");return Number(t[t.length-2])},St=e=>{if(!e)return;const t=e.querySelector("input");t?t.click():za(e)&&e.click()},Tt=(e,t)=>{const s=t.slice(0),n=s.map(p=>p.uid),l=e.reduce((p,u)=>{const v=n.indexOf(u.uid);return v>-1&&(p.push(u),s.splice(v,1),n.splice(v,1)),p},[]);return l.push(...s),l},_t=ie({name:"ElCascaderPanel",components:{ElCascaderMenu:Ct},props:{...ha,border:{type:Boolean,default:!0},renderLabel:Function},emits:[Ee,we,"close","expand-change"],setup(e,{emit:t,slots:s}){let n=!1;const l=de("cascader"),p=$t(e);let u=null;const v=S(!0),d=S([]),b=S(null),k=S([]),V=S(null),P=S([]),te=m(()=>p.value.expandTrigger==="hover"),q=m(()=>e.renderLabel||s.default),x=()=>{const{options:r}=e,h=p.value;n=!1,u=new ea(r,h),k.value=[u.getNodes()],h.lazy&&De(e.options)?(v.value=!1,z(void 0,y=>{y&&(u=new ea(y,h),k.value=[u.getNodes()]),v.value=!0,U(!1,!0)})):U(!1,!0)},z=(r,h)=>{const y=p.value;r=r||new pe({},y,void 0,!0),r.loading=!0;const g=N=>{const w=r,A=w.root?null:w;N&&(u==null||u.appendNodes(N,A)),w.loading=!1,w.loaded=!0,w.childrenData=w.childrenData||[],h&&h(N)};y.lazyLoad(r,g)},H=(r,h)=>{var y;const{level:g}=r,N=k.value.slice(0,g);let w;r.isLeaf?w=r.pathNodes[g-2]:(w=r,N.push(r.children)),((y=V.value)==null?void 0:y.uid)!==(w==null?void 0:w.uid)&&(V.value=r,k.value=N,!h&&t("expand-change",(r==null?void 0:r.pathValues)||[]))},Z=(r,h,y=!0)=>{const{checkStrictly:g,multiple:N}=p.value,w=P.value[0];n=!0,!N&&(w==null||w.doCheck(!1)),r.doCheck(h),$(),y&&!N&&!g&&t("close"),!y&&!N&&!g&&L(r)},L=r=>{r&&(r=r.parent,L(r),r&&H(r))},j=r=>u==null?void 0:u.getFlattedNodes(r),_=r=>{var h;return(h=j(r))==null?void 0:h.filter(y=>y.checked!==!1)},C=()=>{P.value.forEach(r=>r.doCheck(!1)),$(),k.value=k.value.slice(0,1),V.value=null,t("expand-change",[])},$=()=>{var r;const{checkStrictly:h,multiple:y}=p.value,g=P.value,N=_(!h),w=Tt(g,N),A=w.map(B=>B.valueByOption);P.value=w,b.value=y?A:(r=A[0])!=null?r:null},U=(r=!1,h=!1)=>{const{modelValue:y}=e,{lazy:g,multiple:N,checkStrictly:w}=p.value,A=!w;if(!(!v.value||n||!h&&ge(y,b.value)))if(g&&!r){const K=Ye(ft(Qe(y))).map(R=>u==null?void 0:u.getNodeByValue(R)).filter(R=>!!R&&!R.loaded&&!R.loading);K.length?K.forEach(R=>{z(R,()=>U(!1,h))}):U(!0,h)}else{const B=N?Qe(y):[y],K=Ye(B.map(R=>u==null?void 0:u.getNodeByValue(R,A)));ne(K,h),b.value=pa(y)}},ne=(r,h=!0)=>{const{checkStrictly:y}=p.value,g=P.value,N=r.filter(B=>!!B&&(y||B.isLeaf)),w=u==null?void 0:u.getSameNode(V.value),A=h&&w||N[0];A?A.pathNodes.forEach(B=>H(B,!0)):V.value=null,g.forEach(B=>B.doCheck(!1)),We(N).forEach(B=>B.doCheck(!0)),P.value=N,re(X)},X=()=>{ra&&d.value.forEach(r=>{const h=r==null?void 0:r.$el;if(h){const y=h.querySelector(`.${l.namespace.value}-scrollbar__wrap`),g=h.querySelector(`.${l.b("node")}.${l.is("active")}`)||h.querySelector(`.${l.b("node")}.in-active-path`);Aa(y,g)}})},Q=r=>{const h=r.target,{code:y}=r;switch(y){case D.up:case D.down:{r.preventDefault();const g=y===D.up?-1:1;Ce(ua(h,g,`.${l.b("node")}[tabindex="-1"]`));break}case D.left:{r.preventDefault();const g=d.value[aa(h)-1],N=g==null?void 0:g.$el.querySelector(`.${l.b("node")}[aria-expanded="true"]`);Ce(N);break}case D.right:{r.preventDefault();const g=d.value[aa(h)+1],N=g==null?void 0:g.$el.querySelector(`.${l.b("node")}[tabindex="-1"]`);Ce(N);break}case D.enter:case D.numpadEnter:St(h);break}};return xa(Fe,We({config:p,expandingNode:V,checkedNodes:P,isHoverMenu:te,initialLoaded:v,renderLabelFn:q,lazyLoad:z,expandNode:H,handleCheckChange:Z})),se([p,()=>e.options],x,{deep:!0,immediate:!0}),se(()=>e.modelValue,()=>{n=!1,U()},{deep:!0}),se(()=>b.value,r=>{ge(r,e.modelValue)||(t(Ee,r),t(we,r))}),Ha(()=>d.value=[]),ca(()=>!De(e.modelValue)&&U()),{ns:l,menuList:d,menus:k,checkedNodes:P,handleKeyDown:Q,handleCheckChange:Z,getFlattedNodes:j,getCheckedNodes:_,clearCheckedNodes:C,calculateCheckedValue:$,scrollToExpandingNode:X}}});function Vt(e,t,s,n,l,p){const u=W("el-cascader-menu");return f(),I("div",{class:T([e.ns.b("panel"),e.ns.is("bordered",e.border)]),onKeydown:e.handleKeyDown},[(f(!0),I(ue,null,me(e.menus,(v,d)=>(f(),F(u,{key:d,ref_for:!0,ref:b=>e.menuList[d]=b,index:d,nodes:[...v]},{empty:M(()=>[Ne(e.$slots,"empty")]),_:2},1032,["index","nodes"]))),128))],42,["onKeydown"])}var Pt=$e(_t,[["render",Vt],["__file","index.vue"]]);const Lt=da(Pt),Mt=ia({...ha,size:Ka,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:oe(Function),default:(e,t)=>e.text.includes(t)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:oe(Function),default:()=>!0},placement:{type:oe(String),values:Oa,default:"bottom-start"},fallbackPlacements:{type:oe(Array),default:["bottom-start","bottom","top-start","top","right","left"]},popperClass:{type:String,default:""},teleported:qa.teleported,tagType:{...Ze.type,default:"info"},tagEffect:{...Ze.effect,default:"light"},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...Ua}),Dt={[Ee]:e=>!0,[we]:e=>!0,focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,visibleChange:e=>Ra(e),expandChange:e=>!!e,removeTag:e=>!!e},It="ElCascader",Ft=ie({name:It}),Bt=ie({...Ft,props:Mt,emits:Dt,setup(e,{expose:t,emit:s}){const n=e,l={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:a})=>{const{modifiersData:o,placement:i}=a;["right","left","bottom","top"].includes(i)||(o.arrow.x=35)},requires:["arrow"]}]},p=Wa();let u=0,v=0;const d=de("cascader"),b=de("input"),{t:k}=oa(),{form:V,formItem:P}=Za(),{valueOnClear:te}=ja(n),{isComposing:q,handleComposition:x}=Ga({afterComposition(a){var o;const i=(o=a.target)==null?void 0:o.value;Me(i)}}),z=S(null),H=S(null),Z=S(null),L=S(null),j=S(null),_=S(!1),C=S(!1),$=S(!1),U=S(!1),ne=S(""),X=S(""),Q=S([]),r=S([]),h=S([]),y=m(()=>p.style),g=m(()=>n.disabled||(V==null?void 0:V.disabled)),N=m(()=>n.placeholder||k("el.cascader.placeholder")),w=m(()=>X.value||Q.value.length>0||q.value?"":N.value),A=Ja(),B=m(()=>A.value==="small"?"small":"default"),K=m(()=>!!n.props.multiple),R=m(()=>!n.filterable||K.value),Be=m(()=>K.value?X.value:ne.value),be=m(()=>{var a;return((a=L.value)==null?void 0:a.checkedNodes)||[]}),fa=m(()=>!n.clearable||g.value||$.value||!C.value?!1:!!be.value.length),ye=m(()=>{const{showAllLevels:a,separator:o}=n,i=be.value;return i.length?K.value?"":i[0].calcText(a,o):""}),va=m(()=>(P==null?void 0:P.validateState)||""),Se=m({get(){return pa(n.modelValue)},set(a){const o=a??te.value;s(Ee,o),s(we,o),n.validateEvent&&(P==null||P.validate("change").catch(i=>Xa()))}}),ma=m(()=>[d.b(),d.m(A.value),d.is("disabled",g.value),p.class]),ga=m(()=>[b.e("icon"),"icon-arrow-down",d.is("reverse",_.value)]),ba=m(()=>d.is("focus",_.value||U.value)),ze=m(()=>{var a,o;return(o=(a=z.value)==null?void 0:a.popperRef)==null?void 0:o.contentRef}),O=a=>{var o,i,E;g.value||(a=a??!_.value,a!==_.value&&(_.value=a,(i=(o=H.value)==null?void 0:o.input)==null||i.setAttribute("aria-expanded",`${a}`),a?(he(),re((E=L.value)==null?void 0:E.scrollToExpandingNode)):n.filterable&&Le(),s("visibleChange",a)))},he=()=>{re(()=>{var a;(a=z.value)==null||a.updatePopper()})},Te=()=>{$.value=!1},_e=a=>{const{showAllLevels:o,separator:i}=n;return{node:a,key:a.uid,text:a.calcText(o,i),hitState:!1,closable:!g.value&&!a.isDisabled,isCollapseTag:!1}},Ve=a=>{var o;const i=a.node;i.doCheck(!1),(o=L.value)==null||o.calculateCheckedValue(),s("removeTag",i.valueByOption)},ya=()=>{if(!K.value)return;const a=be.value,o=[],i=[];if(a.forEach(E=>i.push(_e(E))),r.value=i,a.length){a.slice(0,n.maxCollapseTags).forEach(Y=>o.push(_e(Y)));const E=a.slice(n.maxCollapseTags),ee=E.length;ee&&(n.collapseTags?o.push({key:-1,text:`+ ${ee}`,closable:!1,isCollapseTag:!0}):E.forEach(Y=>o.push(_e(Y))))}Q.value=o},xe=()=>{var a,o;const{filterMethod:i,showAllLevels:E,separator:ee}=n,Y=(o=(a=L.value)==null?void 0:a.getFlattedNodes(!n.props.checkStrictly))==null?void 0:o.filter(ae=>ae.isDisabled?!1:(ae.calcText(E,ee),i(ae,Be.value)));K.value&&(Q.value.forEach(ae=>{ae.hitState=!1}),r.value.forEach(ae=>{ae.hitState=!1})),$.value=!0,h.value=Y,he()},ka=()=>{var a;let o;$.value&&j.value?o=j.value.$el.querySelector(`.${d.e("suggestion-item")}`):o=(a=L.value)==null?void 0:a.$el.querySelector(`.${d.b("node")}[tabindex="-1"]`),o&&(o.focus(),!$.value&&o.click())},Pe=()=>{var a,o;const i=(a=H.value)==null?void 0:a.input,E=Z.value,ee=(o=j.value)==null?void 0:o.$el;if(!(!ra||!i)){if(ee){const Y=ee.querySelector(`.${d.e("suggestion-list")}`);Y.style.minWidth=`${i.offsetWidth}px`}if(E){const{offsetHeight:Y}=E,ae=Q.value.length>0?`${Math.max(Y,u)-2}px`:`${u}px`;i.style.height=ae,he()}}},Ca=a=>{var o;return(o=L.value)==null?void 0:o.getCheckedNodes(a)},Na=a=>{he(),s("expandChange",a)},Ea=a=>{if(!q.value)switch(a.code){case D.enter:case D.numpadEnter:O();break;case D.down:O(!0),re(ka),a.preventDefault();break;case D.esc:_.value===!0&&(a.preventDefault(),a.stopPropagation(),O(!1));break;case D.tab:O(!1);break}},wa=()=>{var a;(a=L.value)==null||a.clearCheckedNodes(),!_.value&&n.filterable&&Le(),O(!1),s("clear")},Le=()=>{const{value:a}=ye;ne.value=a,X.value=a},$a=a=>{var o,i;const{checked:E}=a;K.value?(o=L.value)==null||o.handleCheckChange(a,!E,!1):(!E&&((i=L.value)==null||i.handleCheckChange(a,!0,!1)),O(!1))},Sa=a=>{const o=a.target,{code:i}=a;switch(i){case D.up:case D.down:{const E=i===D.up?-1:1;Ce(ua(o,E,`.${d.e("suggestion-item")}[tabindex="-1"]`));break}case D.enter:case D.numpadEnter:o.click();break}},Ta=()=>{const a=Q.value,o=a[a.length-1];v=X.value?0:v+1,!(!o||!v||n.collapseTags&&a.length>1)&&(o.hitState?Ve(o):o.hitState=!0)},He=a=>{const o=a.target,i=d.e("search-input");o.className===i&&(U.value=!0),s("focus",a)},Ae=a=>{U.value=!1,s("blur",a)},_a=Ya(()=>{const{value:a}=Be;if(!a)return;const o=n.beforeFilter(a);Qa(o)?o.then(xe).catch(()=>{}):o!==!1?xe():Te()},n.debounce),Me=(a,o)=>{!_.value&&O(!0),!(o!=null&&o.isComposing)&&(a?_a():Te())},Ke=a=>Number.parseFloat(rt(b.cssVarName("input-height"),a).value)-2;return se($,he),se([be,g,()=>n.collapseTags],ya),se(Q,()=>{re(()=>Pe())}),se(A,async()=>{await re();const a=H.value.input;u=Ke(a)||u,Pe()}),se(ye,Le,{immediate:!0}),ca(()=>{const a=H.value.input,o=Ke(a);u=a.offsetHeight||o,et(a,Pe)}),t({getCheckedNodes:Ca,cascaderPanelRef:L,togglePopperVisible:O,contentRef:ze,presentText:ye}),(a,o)=>(f(),F(c(Ge),{ref_key:"tooltipRef",ref:z,visible:_.value,teleported:a.teleported,"popper-class":[c(d).e("dropdown"),a.popperClass],"popper-options":l,"fallback-placements":a.fallbackPlacements,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:a.placement,transition:`${c(d).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:a.persistent,onHide:Te},{default:M(()=>[ke((f(),I("div",{class:T(c(ma)),style:at(c(y)),onClick:()=>O(c(R)?void 0:!0),onKeydown:Ea,onMouseenter:i=>C.value=!0,onMouseleave:i=>C.value=!1},[J(c(tt),{ref_key:"input",ref:H,modelValue:ne.value,"onUpdate:modelValue":i=>ne.value=i,placeholder:c(w),readonly:c(R),disabled:c(g),"validate-event":!1,size:c(A),class:T(c(ba)),tabindex:c(K)&&a.filterable&&!c(g)?-1:void 0,onCompositionstart:c(x),onCompositionupdate:c(x),onCompositionend:c(x),onFocus:He,onBlur:Ae,onInput:Me},{suffix:M(()=>[c(fa)?(f(),F(c(fe),{key:"clear",class:T([c(b).e("icon"),"icon-circle-close"]),onClick:ve(wa,["stop"])},{default:M(()=>[J(c(nt))]),_:1},8,["class","onClick"])):(f(),F(c(fe),{key:"arrow-down",class:T(c(ga)),onClick:ve(i=>O(),["stop"])},{default:M(()=>[J(c(st))]),_:1},8,["class","onClick"]))]),_:1},8,["modelValue","onUpdate:modelValue","placeholder","readonly","disabled","size","class","tabindex","onCompositionstart","onCompositionupdate","onCompositionend"]),c(K)?(f(),I("div",{key:0,ref_key:"tagWrapper",ref:Z,class:T([c(d).e("tags"),c(d).is("validate",!!c(va))])},[(f(!0),I(ue,null,me(Q.value,i=>(f(),F(c(je),{key:i.key,type:a.tagType,size:c(B),effect:a.tagEffect,hit:i.hitState,closable:i.closable,"disable-transitions":"",onClose:E=>Ve(i)},{default:M(()=>[i.isCollapseTag===!1?(f(),I("span",{key:0},le(i.text),1)):(f(),F(c(Ge),{key:1,disabled:_.value||!a.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:M(()=>[ce("span",null,le(i.text),1)]),content:M(()=>[ce("div",{class:T(c(d).e("collapse-tags"))},[(f(!0),I(ue,null,me(r.value.slice(a.maxCollapseTags),(E,ee)=>(f(),I("div",{key:ee,class:T(c(d).e("collapse-tag"))},[(f(),F(c(je),{key:E.key,class:"in-tooltip",type:a.tagType,size:c(B),effect:a.tagEffect,hit:E.hitState,closable:E.closable,"disable-transitions":"",onClose:Y=>Ve(E)},{default:M(()=>[ce("span",null,le(E.text),1)]),_:2},1032,["type","size","effect","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","effect","hit","closable","onClose"]))),128)),a.filterable&&!c(g)?ke((f(),I("input",{key:0,"onUpdate:modelValue":i=>X.value=i,type:"text",class:T(c(d).e("search-input")),placeholder:c(ye)?"":c(N),onInput:i=>Me(X.value,i),onClick:ve(i=>O(!0),["stop"]),onKeydown:lt(Ta,["delete"]),onCompositionstart:c(x),onCompositionupdate:c(x),onCompositionend:c(x),onFocus:He,onBlur:Ae},null,42,["onUpdate:modelValue","placeholder","onInput","onClick","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend"])),[[ot,X.value]]):G("v-if",!0)],2)):G("v-if",!0)],46,["onClick","onMouseenter","onMouseleave"])),[[c(it),()=>O(!1),c(ze)]])]),content:M(()=>[ke(J(c(Lt),{ref_key:"cascaderPanelRef",ref:L,modelValue:c(Se),"onUpdate:modelValue":i=>ct(Se)?Se.value=i:null,options:a.options,props:n.props,border:!1,"render-label":a.$slots.default,onExpandChange:Na,onClose:i=>a.$nextTick(()=>O(!1))},{empty:M(()=>[Ne(a.$slots,"empty")]),_:3},8,["modelValue","onUpdate:modelValue","options","props","render-label","onClose"]),[[Je,!$.value]]),a.filterable?ke((f(),F(c(la),{key:0,ref_key:"suggestionPanel",ref:j,tag:"ul",class:T(c(d).e("suggestion-panel")),"view-class":c(d).e("suggestion-list"),onKeydown:Sa},{default:M(()=>[h.value.length?(f(!0),I(ue,{key:0},me(h.value,i=>(f(),I("li",{key:i.uid,class:T([c(d).e("suggestion-item"),c(d).is("checked",i.checked)]),tabindex:-1,onClick:E=>$a(i)},[ce("span",null,le(i.text),1),i.checked?(f(),F(c(fe),{key:0},{default:M(()=>[J(c(ta))]),_:1})):G("v-if",!0)],10,["onClick"]))),128)):Ne(a.$slots,"empty",{key:1},()=>[ce("li",{class:T(c(d).e("empty-text"))},le(c(k)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[Je,$.value]]):G("v-if",!0)]),_:3},8,["visible","teleported","popper-class","fallback-placements","placement","transition","persistent"]))}});var zt=$e(Bt,[["__file","cascader.vue"]]);const xt=da(zt),qt=ie({__name:"d-cascader",props:Xe({designData:{}},{modelValue:{},modelModifiers:{}}),emits:Xe(["change"],["update:modelValue"]),setup(e,{emit:t}){const s=e,n=t,l=ut(e,"modelValue"),p=m(()=>s.designData.options);function u(v){n("change",v)}return(v,d)=>{const b=xt;return f(),F(b,dt(c(p),{modelValue:l.value,"onUpdate:modelValue":d[0]||(d[0]=k=>l.value=k),clearable:c(p).clearable??!0,filterable:c(p).filterable??!0,onChange:u}),null,16,["modelValue","clearable","filterable"])}}});export{qt as default};
