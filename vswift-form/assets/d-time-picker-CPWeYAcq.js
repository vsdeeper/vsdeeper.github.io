import{be as Te,bf as H,bg as Q,bh as Ce,bi as Ve,bj as Pe,M as De,bk as we,a8 as Re,a9 as xe,O as Ae,d as j,Y as Oe,N as J,S as Me,T as _,v as X,o as ee,i as Ee,J as k,W as g,g as s,$ as A,e as O,B as Ie,a5 as U,al as Ne,ae as ye,aO as ne,ao as Be,G as W,u as He,b as Ue}from"./index-Cb27ZIqA.js";import{f as Fe,u as je,g as Z,d as w,h as Ke,i as $e,c as Le,t as Ge,T as Ye,j as qe,C as ze}from"./panel-time-pick-DYfU__qf.js";function Je(){}function We(t){return t!==t}function Ze(t,l,o){for(var i=o-1,u=t.length;++i<u;)if(t[i]===l)return i;return-1}function Qe(t,l,o){return l===l?Ze(t,l,o):Te(t,We,o)}function Xe(t,l){var o=t==null?0:t.length;return!!o&&Qe(t,l,0)>-1}var en=1/0,nn=H&&1/Q(new H([,-0]))[1]==en?function(t){return new H(t)}:Je,an=200;function tn(t,l,o){var i=-1,u=Xe,b=t.length,a=!0,p=[],d=p;if(b>=an){var S=nn(t);if(S)return Q(S);a=!1,u=Ve,d=new Ce}else d=p;e:for(;++i<b;){var v=t[i],T=v;if(v=v!==0?v:0,a&&T===T){for(var R=d.length;R--;)if(d[R]===T)continue e;p.push(v)}else u(d,T,o)||(d!==p&&d.push(T),p.push(v))}return p}var F=Pe(function(t){return tn(De(t,1,we,!0))});const sn=Re({...Fe,parsedValue:{type:xe(Array)}}),on=j({__name:"panel-time-range",props:sn,emits:["pick","select-range","set-picker-option"],setup(t,{emit:l}){const o=t,i=(e,n)=>{const r=[];for(let c=e;c<=n;c++)r.push(c);return r},{t:u,lang:b}=Oe(),a=J("time"),p=J("picker"),d=Me("EP_PICKER_BASE"),{arrowControl:S,disabledHours:v,disabledMinutes:T,disabledSeconds:R,defaultValue:M}=d.props,ae=_(()=>[a.be("range-picker","body"),a.be("panel","content"),a.is("arrow",S),P.value?"has-seconds":""]),te=_(()=>[a.be("range-picker","body"),a.be("panel","content"),a.is("arrow",S),P.value?"has-seconds":""]),C=_(()=>o.parsedValue[0]),V=_(()=>o.parsedValue[1]),se=je(o),oe=()=>{l("pick",se.value,!1)},P=_(()=>o.format.includes("ss")),K=_(()=>o.format.includes("A")?"A":o.format.includes("a")?"a":""),le=(e=!1)=>{l("pick",[C.value,V.value],e)},re=e=>{$(e.millisecond(0),V.value)},ie=e=>{$(C.value,e.millisecond(0))},ce=e=>{const n=e.map(c=>w(c).locale(b.value)),r=G(n);return n[0].isSame(r[0])&&n[1].isSame(r[1])},$=(e,n)=>{o.visible&&l("pick",[e,n],!0)},ue=_(()=>C.value>V.value),x=X([0,2]),de=(e,n)=>{l("select-range",e,n,"min"),x.value=[e,n]},L=_(()=>P.value?11:8),pe=(e,n)=>{l("select-range",e,n,"max");const r=s(L);x.value=[e+r,n+r]},me=e=>{const n=P.value?[0,3,6,11,14,17]:[0,3,8,11],r=["hours","minutes"].concat(P.value?["seconds"]:[]),m=(n.indexOf(x.value[0])+e+n.length)%n.length,f=n.length/2;m<f?y.start_emitSelectRange(r[m]):y.end_emitSelectRange(r[m-f])},fe=e=>{const n=e.code,{left:r,right:c,up:m,down:f}=Ne;if([r,c].includes(n)){me(n===r?-1:1),e.preventDefault();return}if([m,f].includes(n)){const h=n===m?-1:1,D=x.value[0]<L.value?"start":"end";y[`${D}_scrollDown`](h),e.preventDefault();return}},E=(e,n)=>{const r=v?v(e):[],c=e==="start",f=(n||(c?V.value:C.value)).hour(),h=c?i(f+1,23):i(0,f-1);return F(r,h)},I=(e,n,r)=>{const c=T?T(e,n):[],m=n==="start",f=r||(m?V.value:C.value),h=f.hour();if(e!==h)return c;const D=f.minute(),B=m?i(D+1,59):i(0,D-1);return F(c,B)},N=(e,n,r,c)=>{const m=R?R(e,n,r):[],f=r==="start",h=c||(f?V.value:C.value),D=h.hour(),B=h.minute();if(e!==D||n!==B)return m;const z=h.second(),_e=f?i(z+1,59):i(0,z-1);return F(m,_e)},G=([e,n])=>[Y(e,"start",!0,n),Y(n,"end",!1,e)],{getAvailableHours:be,getAvailableMinutes:ve,getAvailableSeconds:ge}=$e(E,I,N),{timePickerOptions:y,getAvailableTime:Y,onSetOption:q}=Ke({getAvailableHours:be,getAvailableMinutes:ve,getAvailableSeconds:ge}),he=e=>e?U(e)?e.map(n=>w(n,o.format).locale(b.value)):w(e,o.format).locale(b.value):null,ke=e=>e?U(e)?e.map(n=>n.format(o.format)):e.format(o.format):null,Se=()=>{if(U(M))return M.map(n=>w(n).locale(b.value));const e=w(M).locale(b.value);return[e,e.add(60,"m")]};return l("set-picker-option",["formatToString",ke]),l("set-picker-option",["parseUserInput",he]),l("set-picker-option",["isValidValue",ce]),l("set-picker-option",["handleKeydownInput",fe]),l("set-picker-option",["getDefaultValue",Se]),l("set-picker-option",["getRangeAvailableTime",G]),(e,n)=>e.actualVisible?(ee(),Ee("div",{key:0,class:g([s(a).b("range-picker"),s(p).b("panel")])},[k("div",{class:g(s(a).be("range-picker","content"))},[k("div",{class:g(s(a).be("range-picker","cell"))},[k("div",{class:g(s(a).be("range-picker","header"))},A(s(u)("el.datepicker.startTime")),3),k("div",{class:g(s(ae))},[O(Z,{ref:"minSpinner",role:"start","show-seconds":s(P),"am-pm-mode":s(K),"arrow-control":s(S),"spinner-date":s(C),"disabled-hours":E,"disabled-minutes":I,"disabled-seconds":N,onChange:re,onSetOption:s(q),onSelectRange:de},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),k("div",{class:g(s(a).be("range-picker","cell"))},[k("div",{class:g(s(a).be("range-picker","header"))},A(s(u)("el.datepicker.endTime")),3),k("div",{class:g(s(te))},[O(Z,{ref:"maxSpinner",role:"end","show-seconds":s(P),"am-pm-mode":s(K),"arrow-control":s(S),"spinner-date":s(V),"disabled-hours":E,"disabled-minutes":I,"disabled-seconds":N,onChange:ie,onSetOption:s(q),onSelectRange:pe},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),k("div",{class:g(s(a).be("panel","footer"))},[k("button",{type:"button",class:g([s(a).be("panel","btn"),"cancel"]),onClick:r=>oe()},A(s(u)("el.datepicker.cancel")),11,["onClick"]),k("button",{type:"button",class:g([s(a).be("panel","btn"),"confirm"]),disabled:s(ue),onClick:r=>le()},A(s(u)("el.datepicker.confirm")),11,["disabled","onClick"])],2)],2)):Ie("v-if",!0)}});var ln=Ae(on,[["__file","panel-time-range.vue"]]);w.extend(Le);var rn=j({name:"ElTimePicker",install:null,props:{...Ge,isRange:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,l){const o=X(),[i,u]=t.isRange?["timerange",ln]:["time",Ye],b=a=>l.emit("update:modelValue",a);return ye("ElPopperOptions",t.popperOptions),l.expose({focus:()=>{var a;(a=o.value)==null||a.focus()},blur:()=>{var a;(a=o.value)==null||a.blur()},handleOpen:()=>{var a;(a=o.value)==null||a.handleOpen()},handleClose:()=>{var a;(a=o.value)==null||a.handleClose()}}),()=>{var a;const p=(a=t.format)!=null?a:qe;return O(ze,ne(t,{ref:o,type:i,format:p,"onUpdate:modelValue":b}),{default:d=>O(u,d,null)})}}});const cn=Be(rn),pn=j({__name:"d-time-picker",props:W({designData:{}},{modelValue:{},modelModifiers:{}}),emits:W(["change"],["update:modelValue"]),setup(t,{emit:l}){const o=t,i=l,u=He(t,"modelValue"),b=_(()=>o.designData.options);function a(p){i("change",p)}return(p,d)=>{const S=cn;return ee(),Ue(S,ne({"value-format":"x"},s(b),{modelValue:u.value,"onUpdate:modelValue":d[0]||(d[0]=v=>u.value=v),onChange:a}),null,16,["modelValue"])}}});export{pn as default};
