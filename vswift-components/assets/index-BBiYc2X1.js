import{k as _a,d as pe,l as ue,n as Va,_ as $e,p as Pa,q as fe,s as aa,t as ta,v as La,x as na,j as m,y as W,o as f,f as I,z as X,c as z,A as ve,e as D,B as ie,C as Y,D as T,F as re,G as sa,H as la,I as Da,r as S,g as me,J as Ke,K as le,L as Ne,M as Ma,N as Me,O as qe,P as Ia,Q as Re,R as Ue,S as ge,T as oa,U as oe,W as Fa,X as za,Y as Ee,Z as we,$ as Ba,a0 as We,w as se,a1 as xa,a2 as ia,a3 as ce,a4 as ca,a5 as Ha,a6 as M,a7 as Ce,a8 as ra,a9 as ua,aa as Aa,ab as Oa,ac as Ka,ad as je,ae as qa,af as Ra,ag as Ua,ah as Wa,ai as ja,aj as Za,ak as Xa,al as Ya,am as Ga,an as Ja,ao as Qa,ap as be,b as r,aq as et,E as at,ar as tt,as as nt,at as Ze,au as Xe,av as st,aw as lt,ax as ot,ay as it,az as Ye,aA as ct}from"./index-BySsZVVZ.js";import{E as rt}from"./index-BsJF6J-d.js";import{u as Ge,c as Je}from"./arrays-5pXQ6Hvx.js";import{c as da}from"./cloneDeep-DKRNvP7c.js";var ut=1/0;function dt(e){var t=e==null?0:e.length;return t?_a(e,ut):[]}var pt=pe({name:"NodeContent",setup(){return{ns:ue("cascader-node")}},render(){const{ns:e}=this,{node:t,panel:s}=this.$parent,{data:n,label:o}=t,{renderLabelFn:p}=s;return Va("span",{class:e.e("label")},p?p({node:t,data:n}):o)}});const Fe=Symbol(),ht=pe({name:"ElCascaderNode",components:{ElCheckbox:Pa,ElRadio:rt,NodeContent:pt,ElIcon:fe,Check:aa,Loading:ta,ArrowRight:La},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:t}){const s=na(Fe),n=ue("cascader-node"),o=m(()=>s.isHoverMenu),p=m(()=>s.config.multiple),u=m(()=>s.config.checkStrictly),g=m(()=>{var b;return(b=s.checkedNodes[0])==null?void 0:b.uid}),d=m(()=>e.node.isDisabled),k=m(()=>e.node.isLeaf),C=m(()=>u.value&&!k.value||!d.value),V=m(()=>te(s.expandingNode)),P=m(()=>u.value&&s.checkedNodes.some(te)),te=b=>{var $;const{level:R,uid:ne}=e.node;return(($=b==null?void 0:b.pathNodes[R-1])==null?void 0:$.uid)===ne},q=()=>{V.value||s.expandNode(e.node)},x=b=>{const{node:$}=e;b!==$.checked&&s.handleCheckChange($,b)},B=()=>{s.lazyLoad(e.node,()=>{k.value||q()})},H=b=>{o.value&&(j(),!k.value&&t("expand",b))},j=()=>{const{node:b}=e;!C.value||b.loading||(b.loaded?q():B())},L=()=>{o.value&&!k.value||(k.value&&!d.value&&!u.value&&!p.value?_(!0):j())},Z=b=>{u.value?(x(b),e.node.loaded&&q()):_(b)},_=b=>{e.node.loaded?(x(b),!u.value&&q()):B()};return{panel:s,isHoverMenu:o,multiple:p,checkStrictly:u,checkedNodeId:g,isDisabled:d,isLeaf:k,expandable:C,inExpandingPath:V,inCheckedPath:P,ns:n,handleHoverExpand:H,handleExpand:j,handleClick:L,handleCheck:_,handleSelectCheck:Z}}});function ft(e,t,s,n,o,p){const u=W("el-checkbox"),g=W("el-radio"),d=W("check"),k=W("el-icon"),C=W("node-content"),V=W("loading"),P=W("arrow-right");return f(),I("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!e.isLeaf,"aria-owns":e.isLeaf?null:e.menuId,"aria-expanded":e.inExpandingPath,tabindex:e.expandable?-1:void 0,class:T([e.ns.b(),e.ns.is("selectable",e.checkStrictly),e.ns.is("active",e.node.checked),e.ns.is("disabled",!e.expandable),e.inExpandingPath&&"in-active-path",e.inCheckedPath&&"in-checked-path"]),onMouseenter:e.handleHoverExpand,onFocus:e.handleHoverExpand,onClick:e.handleClick},[X(" prefix "),e.multiple?(f(),z(u,{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:e.isDisabled,onClick:ve(()=>{},["stop"]),"onUpdate:modelValue":e.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onClick","onUpdate:modelValue"])):e.checkStrictly?(f(),z(g,{key:1,"model-value":e.checkedNodeId,label:e.node.uid,disabled:e.isDisabled,"onUpdate:modelValue":e.handleSelectCheck,onClick:ve(()=>{},["stop"])},{default:D(()=>[X(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),ie("span")]),_:1},8,["model-value","label","disabled","onUpdate:modelValue","onClick"])):e.isLeaf&&e.node.checked?(f(),z(k,{key:2,class:T(e.ns.e("prefix"))},{default:D(()=>[Y(d)]),_:1},8,["class"])):X("v-if",!0),X(" content "),Y(C),X(" postfix "),e.isLeaf?X("v-if",!0):(f(),I(re,{key:3},[e.node.loading?(f(),z(k,{key:0,class:T([e.ns.is("loading"),e.ns.e("postfix")])},{default:D(()=>[Y(V)]),_:1},8,["class"])):(f(),z(k,{key:1,class:T(["arrow-right",e.ns.e("postfix")])},{default:D(()=>[Y(P)]),_:1},8,["class"]))],64))],42,["id","aria-haspopup","aria-owns","aria-expanded","tabindex","onMouseenter","onFocus","onClick"])}var vt=$e(ht,[["render",ft],["__file","node.vue"]]);const mt=pe({name:"ElCascaderMenu",components:{Loading:ta,ElIcon:fe,ElScrollbar:sa,ElCascaderNode:vt},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const t=Ma(),s=ue("cascader-menu"),{t:n}=la(),o=Da();let p=null,u=null;const g=na(Fe),d=S(null),k=m(()=>!e.nodes.length),C=m(()=>!g.initialLoaded),V=m(()=>`${o.value}-${e.index}`),P=B=>{p=B.target},te=B=>{if(!(!g.isHoverMenu||!p||!d.value))if(p.contains(B.target)){q();const H=t.vnode.el,{left:j}=H.getBoundingClientRect(),{offsetWidth:L,offsetHeight:Z}=H,_=B.clientX-j,b=p.offsetTop,$=b+p.offsetHeight;d.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${_} ${b} L${L} 0 V${b} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${_} ${$} L${L} ${Z} V${$} Z" />
        `}else u||(u=window.setTimeout(x,g.config.hoverThreshold))},q=()=>{u&&(clearTimeout(u),u=null)},x=()=>{d.value&&(d.value.innerHTML="",q())};return{ns:s,panel:g,hoverZone:d,isEmpty:k,isLoading:C,menuId:V,t:n,handleExpand:P,handleMouseMove:te,clearHoverZone:x}}});function gt(e,t,s,n,o,p){const u=W("el-cascader-node"),g=W("loading"),d=W("el-icon"),k=W("el-scrollbar");return f(),z(k,{key:e.menuId,tag:"ul",role:"menu",class:T(e.ns.b()),"wrap-class":e.ns.e("wrap"),"view-class":[e.ns.e("list"),e.ns.is("empty",e.isEmpty)],onMousemove:e.handleMouseMove,onMouseleave:e.clearHoverZone},{default:D(()=>{var C;return[(f(!0),I(re,null,me(e.nodes,V=>(f(),z(u,{key:V.uid,node:V,"menu-id":e.menuId,onExpand:e.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),e.isLoading?(f(),I("div",{key:0,class:T(e.ns.e("empty-text"))},[Y(d,{size:"14",class:T(e.ns.is("loading"))},{default:D(()=>[Y(g)]),_:1},8,["class"]),Ke(" "+le(e.t("el.cascader.loading")),1)],2)):e.isEmpty?(f(),I("div",{key:1,class:T(e.ns.e("empty-text"))},[Ne(e.$slots,"empty",{},()=>[Ke(le(e.t("el.cascader.noData")),1)])],2)):(C=e.panel)!=null&&C.isHoverMenu?(f(),I("svg",{key:2,ref:"hoverZone",class:T(e.ns.e("hover-zone"))},null,2)):X("v-if",!0)]}),_:3},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var yt=$e(mt,[["render",gt],["__file","menu.vue"]]);let kt=0;const bt=e=>{const t=[e];let{parent:s}=e;for(;s;)t.unshift(s),s=s.parent;return t};class de{constructor(t,s,n,o=!1){this.data=t,this.config=s,this.parent=n,this.root=o,this.uid=kt++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:p,label:u,children:g}=s,d=t[g],k=bt(this);this.level=o?0:n?n.level+1:1,this.value=t[p],this.label=t[u],this.pathNodes=k,this.pathValues=k.map(C=>C.value),this.pathLabels=k.map(C=>C.label),this.childrenData=d,this.children=(d||[]).map(C=>new de(C,s,this)),this.loaded=!s.lazy||this.isLeaf||!Me(d)}get isDisabled(){const{data:t,parent:s,config:n}=this,{disabled:o,checkStrictly:p}=n;return(qe(o)?o(t,this):!!t[o])||!p&&(s==null?void 0:s.isDisabled)}get isLeaf(){const{data:t,config:s,childrenData:n,loaded:o}=this,{lazy:p,leaf:u}=s,g=qe(u)?u(t,this):t[u];return Ia(g)?p&&!o?!1:!(Re(n)&&n.length):!!g}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(t){const{childrenData:s,children:n}=this,o=new de(t,this.config,this);return Re(s)?s.push(t):this.childrenData=[t],n.push(o),o}calcText(t,s){const n=t?this.pathLabels.join(s):this.label;return this.text=n,n}broadcast(t,...s){const n=`onParent${Ue(t)}`;this.children.forEach(o=>{o&&(o.broadcast(t,...s),o[n]&&o[n](...s))})}emit(t,...s){const{parent:n}=this,o=`onChild${Ue(t)}`;n&&(n[o]&&n[o](...s),n.emit(t,...s))}onParentCheck(t){this.isDisabled||this.setCheckState(t)}onChildCheck(){const{children:t}=this,s=t.filter(o=>!o.isDisabled),n=s.length?s.every(o=>o.checked):!1;this.setCheckState(n)}setCheckState(t){const s=this.children.length,n=this.children.reduce((o,p)=>{const u=p.checked?1:p.indeterminate?.5:0;return o+u},0);this.checked=this.loaded&&this.children.filter(o=>!o.isDisabled).every(o=>o.loaded&&o.checked)&&t,this.indeterminate=this.loaded&&n!==s&&n>0}doCheck(t){if(this.checked===t)return;const{checkStrictly:s,multiple:n}=this.config;s||!n?this.checked=t:(this.broadcast("check",t),this.setCheckState(t),this.emit("check"))}}const Ie=(e,t)=>e.reduce((s,n)=>(n.isLeaf?s.push(n):(!t&&s.push(n),s=s.concat(Ie(n.children,t))),s),[]);class Qe{constructor(t,s){this.config=s;const n=(t||[]).map(o=>new de(o,this.config));this.nodes=n,this.allNodes=Ie(n,!1),this.leafNodes=Ie(n,!0)}getNodes(){return this.nodes}getFlattedNodes(t){return t?this.leafNodes:this.allNodes}appendNode(t,s){const n=s?s.appendChild(t):new de(t,this.config);s||this.nodes.push(n),this.allNodes.push(n),n.isLeaf&&this.leafNodes.push(n)}appendNodes(t,s){t.forEach(n=>this.appendNode(n,s))}getNodeByValue(t,s=!1){return!t&&t!==0?null:this.getFlattedNodes(s).find(o=>ge(o.value,t)||ge(o.pathValues,t))||null}getSameNode(t){return t&&this.getFlattedNodes(!1).find(({value:n,level:o})=>ge(t.value,n)&&t.level===o)||null}}const pa=oa({modelValue:{type:oe([Number,String,Array])},options:{type:oe(Array),default:()=>[]},props:{type:oe(Object),default:()=>({})}}),Ct={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:Fa,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},Nt=e=>m(()=>({...Ct,...e.props})),ea=e=>{if(!e)return 0;const t=e.id.split("-");return Number(t[t.length-2])},Et=e=>{if(!e)return;const t=e.querySelector("input");t?t.click():za(e)&&e.click()},wt=(e,t)=>{const s=t.slice(0),n=s.map(p=>p.uid),o=e.reduce((p,u)=>{const g=n.indexOf(u.uid);return g>-1&&(p.push(u),s.splice(g,1),n.splice(g,1)),p},[]);return o.push(...s),o},$t=pe({name:"ElCascaderPanel",components:{ElCascaderMenu:yt},props:{...pa,border:{type:Boolean,default:!0},renderLabel:Function},emits:[Ee,we,"close","expand-change"],setup(e,{emit:t,slots:s}){let n=!1;const o=ue("cascader"),p=Nt(e);let u=null;const g=S(!0),d=S([]),k=S(null),C=S([]),V=S(null),P=S([]),te=m(()=>p.value.expandTrigger==="hover"),q=m(()=>e.renderLabel||s.default),x=()=>{const{options:c}=e,h=p.value;n=!1,u=new Qe(c,h),C.value=[u.getNodes()],h.lazy&&Me(e.options)?(g.value=!1,B(void 0,y=>{y&&(u=new Qe(y,h),C.value=[u.getNodes()]),g.value=!0,R(!1,!0)})):R(!1,!0)},B=(c,h)=>{const y=p.value;c=c||new de({},y,void 0,!0),c.loading=!0;const v=N=>{const w=c,A=w.root?null:w;N&&(u==null||u.appendNodes(N,A)),w.loading=!1,w.loaded=!0,w.childrenData=w.childrenData||[],h&&h(N)};y.lazyLoad(c,v)},H=(c,h)=>{var y;const{level:v}=c,N=C.value.slice(0,v);let w;c.isLeaf?w=c.pathNodes[v-2]:(w=c,N.push(c.children)),((y=V.value)==null?void 0:y.uid)!==(w==null?void 0:w.uid)&&(V.value=c,C.value=N,!h&&t("expand-change",(c==null?void 0:c.pathValues)||[]))},j=(c,h,y=!0)=>{const{checkStrictly:v,multiple:N}=p.value,w=P.value[0];n=!0,!N&&(w==null||w.doCheck(!1)),c.doCheck(h),$(),y&&!N&&!v&&t("close"),!y&&!N&&!v&&L(c)},L=c=>{c&&(c=c.parent,L(c),c&&H(c))},Z=c=>u==null?void 0:u.getFlattedNodes(c),_=c=>{var h;return(h=Z(c))==null?void 0:h.filter(y=>y.checked!==!1)},b=()=>{P.value.forEach(c=>c.doCheck(!1)),$(),C.value=C.value.slice(0,1),V.value=null,t("expand-change",[])},$=()=>{var c;const{checkStrictly:h,multiple:y}=p.value,v=P.value,N=_(!h),w=wt(v,N),A=w.map(F=>F.valueByOption);P.value=w,k.value=y?A:(c=A[0])!=null?c:null},R=(c=!1,h=!1)=>{const{modelValue:y}=e,{lazy:v,multiple:N,checkStrictly:w}=p.value,A=!w;if(!(!g.value||n||!h&&ge(y,k.value)))if(v&&!c){const O=Ge(dt(Je(y))).map(U=>u==null?void 0:u.getNodeByValue(U)).filter(U=>!!U&&!U.loaded&&!U.loading);O.length?O.forEach(U=>{B(U,()=>R(!1,h))}):R(!0,h)}else{const F=N?Je(y):[y],O=Ge(F.map(U=>u==null?void 0:u.getNodeByValue(U,A)));ne(O,h),k.value=da(y)}},ne=(c,h=!0)=>{const{checkStrictly:y}=p.value,v=P.value,N=c.filter(F=>!!F&&(y||F.isLeaf)),w=u==null?void 0:u.getSameNode(V.value),A=h&&w||N[0];A?A.pathNodes.forEach(F=>H(F,!0)):V.value=null,v.forEach(F=>F.doCheck(!1)),We(N).forEach(F=>F.doCheck(!0)),P.value=N,ce(G)},G=()=>{ca&&d.value.forEach(c=>{const h=c==null?void 0:c.$el;if(h){const y=h.querySelector(`.${o.namespace.value}-scrollbar__wrap`),v=h.querySelector(`.${o.b("node")}.${o.is("active")}`)||h.querySelector(`.${o.b("node")}.in-active-path`);Ha(y,v)}})},Q=c=>{const h=c.target,{code:y}=c;switch(y){case M.up:case M.down:{c.preventDefault();const v=y===M.up?-1:1;Ce(ra(h,v,`.${o.b("node")}[tabindex="-1"]`));break}case M.left:{c.preventDefault();const v=d.value[ea(h)-1],N=v==null?void 0:v.$el.querySelector(`.${o.b("node")}[aria-expanded="true"]`);Ce(N);break}case M.right:{c.preventDefault();const v=d.value[ea(h)+1],N=v==null?void 0:v.$el.querySelector(`.${o.b("node")}[tabindex="-1"]`);Ce(N);break}case M.enter:case M.numpadEnter:Et(h);break}};return Ba(Fe,We({config:p,expandingNode:V,checkedNodes:P,isHoverMenu:te,initialLoaded:g,renderLabelFn:q,lazyLoad:B,expandNode:H,handleCheckChange:j})),se([p,()=>e.options],x,{deep:!0,immediate:!0}),se(()=>e.modelValue,()=>{n=!1,R()},{deep:!0}),se(()=>k.value,c=>{ge(c,e.modelValue)||(t(Ee,c),t(we,c))}),xa(()=>d.value=[]),ia(()=>!Me(e.modelValue)&&R()),{ns:o,menuList:d,menus:C,checkedNodes:P,handleKeyDown:Q,handleCheckChange:j,getFlattedNodes:Z,getCheckedNodes:_,clearCheckedNodes:b,calculateCheckedValue:$,scrollToExpandingNode:G}}});function St(e,t,s,n,o,p){const u=W("el-cascader-menu");return f(),I("div",{class:T([e.ns.b("panel"),e.ns.is("bordered",e.border)]),onKeydown:e.handleKeyDown},[(f(!0),I(re,null,me(e.menus,(g,d)=>(f(),z(u,{key:d,ref_for:!0,ref:k=>e.menuList[d]=k,index:d,nodes:[...g]},{empty:D(()=>[Ne(e.$slots,"empty")]),_:2},1032,["index","nodes"]))),128))],42,["onKeydown"])}var Tt=$e($t,[["render",St],["__file","index.vue"]]);const _t=ua(Tt),Vt=oa({...pa,size:Aa,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:oe(Function),default:(e,t)=>e.text.includes(t)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:oe(Function),default:()=>!0},placement:{type:oe(String),values:Oa,default:"bottom-start"},fallbackPlacements:{type:oe(Array),default:["bottom-start","bottom","top-start","top","right","left"]},popperClass:{type:String,default:""},teleported:Ka.teleported,tagType:{...je.type,default:"info"},tagEffect:{...je.effect,default:"light"},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...qa}),Pt={[Ee]:e=>!0,[we]:e=>!0,focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,visibleChange:e=>Ra(e),expandChange:e=>!!e,removeTag:e=>!!e},Lt="ElCascader",Dt=pe({name:Lt}),Mt=pe({...Dt,props:Vt,emits:Pt,setup(e,{expose:t,emit:s}){const n=e,o={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:a})=>{const{modifiersData:l,placement:i}=a;["right","left","bottom","top"].includes(i)||(l.arrow.x=35)},requires:["arrow"]}]},p=Ua();let u=0,g=0;const d=ue("cascader"),k=ue("input"),{t:C}=la(),{form:V,formItem:P}=Wa(),{valueOnClear:te}=ja(n),{isComposing:q,handleComposition:x}=Za({afterComposition(a){var l;const i=(l=a.target)==null?void 0:l.value;De(i)}}),B=S(null),H=S(null),j=S(null),L=S(null),Z=S(null),_=S(!1),b=S(!1),$=S(!1),R=S(!1),ne=S(""),G=S(""),Q=S([]),c=S([]),h=S([]),y=m(()=>p.style),v=m(()=>n.disabled||(V==null?void 0:V.disabled)),N=m(()=>n.placeholder||C("el.cascader.placeholder")),w=m(()=>G.value||Q.value.length>0||q.value?"":N.value),A=Xa(),F=m(()=>A.value==="small"?"small":"default"),O=m(()=>!!n.props.multiple),U=m(()=>!n.filterable||O.value),ze=m(()=>O.value?G.value:ne.value),ye=m(()=>{var a;return((a=L.value)==null?void 0:a.checkedNodes)||[]}),ha=m(()=>!n.clearable||v.value||$.value||!b.value?!1:!!ye.value.length),ke=m(()=>{const{showAllLevels:a,separator:l}=n,i=ye.value;return i.length?O.value?"":i[0].calcText(a,l):""}),fa=m(()=>(P==null?void 0:P.validateState)||""),Se=m({get(){return da(n.modelValue)},set(a){const l=a??te.value;s(Ee,l),s(we,l),n.validateEvent&&(P==null||P.validate("change").catch(i=>Ya()))}}),va=m(()=>[d.b(),d.m(A.value),d.is("disabled",v.value),p.class]),ma=m(()=>[k.e("icon"),"icon-arrow-down",d.is("reverse",_.value)]),ga=m(()=>d.is("focus",_.value||R.value)),Be=m(()=>{var a,l;return(l=(a=B.value)==null?void 0:a.popperRef)==null?void 0:l.contentRef}),K=a=>{var l,i,E;v.value||(a=a??!_.value,a!==_.value&&(_.value=a,(i=(l=H.value)==null?void 0:l.input)==null||i.setAttribute("aria-expanded",`${a}`),a?(he(),ce((E=L.value)==null?void 0:E.scrollToExpandingNode)):n.filterable&&Le(),s("visibleChange",a)))},he=()=>{ce(()=>{var a;(a=B.value)==null||a.updatePopper()})},Te=()=>{$.value=!1},_e=a=>{const{showAllLevels:l,separator:i}=n;return{node:a,key:a.uid,text:a.calcText(l,i),hitState:!1,closable:!v.value&&!a.isDisabled,isCollapseTag:!1}},Ve=a=>{var l;const i=a.node;i.doCheck(!1),(l=L.value)==null||l.calculateCheckedValue(),s("removeTag",i.valueByOption)},ya=()=>{if(!O.value)return;const a=ye.value,l=[],i=[];if(a.forEach(E=>i.push(_e(E))),c.value=i,a.length){a.slice(0,n.maxCollapseTags).forEach(J=>l.push(_e(J)));const E=a.slice(n.maxCollapseTags),ee=E.length;ee&&(n.collapseTags?l.push({key:-1,text:`+ ${ee}`,closable:!1,isCollapseTag:!0}):E.forEach(J=>l.push(_e(J))))}Q.value=l},xe=()=>{var a,l;const{filterMethod:i,showAllLevels:E,separator:ee}=n,J=(l=(a=L.value)==null?void 0:a.getFlattedNodes(!n.props.checkStrictly))==null?void 0:l.filter(ae=>ae.isDisabled?!1:(ae.calcText(E,ee),i(ae,ze.value)));O.value&&(Q.value.forEach(ae=>{ae.hitState=!1}),c.value.forEach(ae=>{ae.hitState=!1})),$.value=!0,h.value=J,he()},ka=()=>{var a;let l;$.value&&Z.value?l=Z.value.$el.querySelector(`.${d.e("suggestion-item")}`):l=(a=L.value)==null?void 0:a.$el.querySelector(`.${d.b("node")}[tabindex="-1"]`),l&&(l.focus(),!$.value&&l.click())},Pe=()=>{var a,l;const i=(a=H.value)==null?void 0:a.input,E=j.value,ee=(l=Z.value)==null?void 0:l.$el;if(!(!ca||!i)){if(ee){const J=ee.querySelector(`.${d.e("suggestion-list")}`);J.style.minWidth=`${i.offsetWidth}px`}if(E){const{offsetHeight:J}=E,ae=Q.value.length>0?`${Math.max(J,u)-2}px`:`${u}px`;i.style.height=ae,he()}}},ba=a=>{var l;return(l=L.value)==null?void 0:l.getCheckedNodes(a)},Ca=a=>{he(),s("expandChange",a)},Na=a=>{if(!q.value)switch(a.code){case M.enter:case M.numpadEnter:K();break;case M.down:K(!0),ce(ka),a.preventDefault();break;case M.esc:_.value===!0&&(a.preventDefault(),a.stopPropagation(),K(!1));break;case M.tab:K(!1);break}},Ea=()=>{var a;(a=L.value)==null||a.clearCheckedNodes(),!_.value&&n.filterable&&Le(),K(!1),s("clear")},Le=()=>{const{value:a}=ke;ne.value=a,G.value=a},wa=a=>{var l,i;const{checked:E}=a;O.value?(l=L.value)==null||l.handleCheckChange(a,!E,!1):(!E&&((i=L.value)==null||i.handleCheckChange(a,!0,!1)),K(!1))},$a=a=>{const l=a.target,{code:i}=a;switch(i){case M.up:case M.down:{const E=i===M.up?-1:1;Ce(ra(l,E,`.${d.e("suggestion-item")}[tabindex="-1"]`));break}case M.enter:case M.numpadEnter:l.click();break}},Sa=()=>{const a=Q.value,l=a[a.length-1];g=G.value?0:g+1,!(!l||!g||n.collapseTags&&a.length>1)&&(l.hitState?Ve(l):l.hitState=!0)},He=a=>{const l=a.target,i=d.e("search-input");l.className===i&&(R.value=!0),s("focus",a)},Ae=a=>{R.value=!1,s("blur",a)},Ta=Ga(()=>{const{value:a}=ze;if(!a)return;const l=n.beforeFilter(a);Ja(l)?l.then(xe).catch(()=>{}):l!==!1?xe():Te()},n.debounce),De=(a,l)=>{!_.value&&K(!0),!(l!=null&&l.isComposing)&&(a?Ta():Te())},Oe=a=>Number.parseFloat(ct(k.cssVarName("input-height"),a).value)-2;return se($,he),se([ye,v,()=>n.collapseTags],ya),se(Q,()=>{ce(()=>Pe())}),se(A,async()=>{await ce();const a=H.value.input;u=Oe(a)||u,Pe()}),se(ke,Le,{immediate:!0}),ia(()=>{const a=H.value.input,l=Oe(a);u=a.offsetHeight||l,Qa(a,Pe)}),t({getCheckedNodes:ba,cascaderPanelRef:L,togglePopperVisible:K,contentRef:Be,presentText:ke}),(a,l)=>(f(),z(r(Xe),{ref_key:"tooltipRef",ref:B,visible:_.value,teleported:a.teleported,"popper-class":[r(d).e("dropdown"),a.popperClass],"popper-options":o,"fallback-placements":a.fallbackPlacements,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:a.placement,transition:`${r(d).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:a.persistent,onHide:Te},{default:D(()=>[be((f(),I("div",{class:T(r(va)),style:et(r(y)),onClick:()=>K(r(U)?void 0:!0),onKeydown:Na,onMouseenter:i=>b.value=!0,onMouseleave:i=>b.value=!1},[Y(r(at),{ref_key:"input",ref:H,modelValue:ne.value,"onUpdate:modelValue":i=>ne.value=i,placeholder:r(w),readonly:r(U),disabled:r(v),"validate-event":!1,size:r(A),class:T(r(ga)),tabindex:r(O)&&a.filterable&&!r(v)?-1:void 0,onCompositionstart:r(x),onCompositionupdate:r(x),onCompositionend:r(x),onFocus:He,onBlur:Ae,onInput:De},{suffix:D(()=>[r(ha)?(f(),z(r(fe),{key:"clear",class:T([r(k).e("icon"),"icon-circle-close"]),onClick:ve(Ea,["stop"])},{default:D(()=>[Y(r(tt))]),_:1},8,["class","onClick"])):(f(),z(r(fe),{key:"arrow-down",class:T(r(ma)),onClick:ve(i=>K(),["stop"])},{default:D(()=>[Y(r(nt))]),_:1},8,["class","onClick"]))]),_:1},8,["modelValue","onUpdate:modelValue","placeholder","readonly","disabled","size","class","tabindex","onCompositionstart","onCompositionupdate","onCompositionend"]),r(O)?(f(),I("div",{key:0,ref_key:"tagWrapper",ref:j,class:T([r(d).e("tags"),r(d).is("validate",!!r(fa))])},[(f(!0),I(re,null,me(Q.value,i=>(f(),z(r(Ze),{key:i.key,type:a.tagType,size:r(F),effect:a.tagEffect,hit:i.hitState,closable:i.closable,"disable-transitions":"",onClose:E=>Ve(i)},{default:D(()=>[i.isCollapseTag===!1?(f(),I("span",{key:0},le(i.text),1)):(f(),z(r(Xe),{key:1,disabled:_.value||!a.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:D(()=>[ie("span",null,le(i.text),1)]),content:D(()=>[ie("div",{class:T(r(d).e("collapse-tags"))},[(f(!0),I(re,null,me(c.value.slice(a.maxCollapseTags),(E,ee)=>(f(),I("div",{key:ee,class:T(r(d).e("collapse-tag"))},[(f(),z(r(Ze),{key:E.key,class:"in-tooltip",type:a.tagType,size:r(F),effect:a.tagEffect,hit:E.hitState,closable:E.closable,"disable-transitions":"",onClose:J=>Ve(E)},{default:D(()=>[ie("span",null,le(E.text),1)]),_:2},1032,["type","size","effect","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","effect","hit","closable","onClose"]))),128)),a.filterable&&!r(v)?be((f(),I("input",{key:0,"onUpdate:modelValue":i=>G.value=i,type:"text",class:T(r(d).e("search-input")),placeholder:r(ke)?"":r(N),onInput:i=>De(G.value,i),onClick:ve(i=>K(!0),["stop"]),onKeydown:st(Sa,["delete"]),onCompositionstart:r(x),onCompositionupdate:r(x),onCompositionend:r(x),onFocus:He,onBlur:Ae},null,42,["onUpdate:modelValue","placeholder","onInput","onClick","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend"])),[[lt,G.value]]):X("v-if",!0)],2)):X("v-if",!0)],46,["onClick","onMouseenter","onMouseleave"])),[[r(ot),()=>K(!1),r(Be)]])]),content:D(()=>[be(Y(r(_t),{ref_key:"cascaderPanelRef",ref:L,modelValue:r(Se),"onUpdate:modelValue":i=>it(Se)?Se.value=i:null,options:a.options,props:n.props,border:!1,"render-label":a.$slots.default,onExpandChange:Ca,onClose:i=>a.$nextTick(()=>K(!1))},{empty:D(()=>[Ne(a.$slots,"empty")]),_:3},8,["modelValue","onUpdate:modelValue","options","props","render-label","onClose"]),[[Ye,!$.value]]),a.filterable?be((f(),z(r(sa),{key:0,ref_key:"suggestionPanel",ref:Z,tag:"ul",class:T(r(d).e("suggestion-panel")),"view-class":r(d).e("suggestion-list"),onKeydown:$a},{default:D(()=>[h.value.length?(f(!0),I(re,{key:0},me(h.value,i=>(f(),I("li",{key:i.uid,class:T([r(d).e("suggestion-item"),r(d).is("checked",i.checked)]),tabindex:-1,onClick:E=>wa(i)},[ie("span",null,le(i.text),1),i.checked?(f(),z(r(fe),{key:0},{default:D(()=>[Y(r(aa))]),_:1})):X("v-if",!0)],10,["onClick"]))),128)):Ne(a.$slots,"empty",{key:1},()=>[ie("li",{class:T(r(d).e("empty-text"))},le(r(C)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[Ye,$.value]]):X("v-if",!0)]),_:3},8,["visible","teleported","popper-class","fallback-placements","placement","transition","persistent"]))}});var It=$e(Mt,[["__file","cascader.vue"]]);const Ht=ua(It);export{Ht as E};
