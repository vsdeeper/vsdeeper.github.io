import{f as Se,u as Te,g as J,d as R,h as _e,i as Pe,c as Ce,t as De,T as we,j as Re,C as Ae}from"./panel-time-pick-D0LpplF5.js";import{b8 as Ve,b9 as F,ba as W,bb as xe,bc as Oe,bd as Ee,i as Ie,be as Me,Q as Ne,R as ye,_ as Be,d as Z,D as He,j as Q,t as Fe,h as T,H as X,o as Ue,b as je,B as h,A as b,g as s,J as x,z as E,x as Ke,aC as U,a3 as Le,W as $e,a as ze}from"./index-Ch7CaZpa.js";function Ge(){}function Ye(a){return a!==a}function qe(a,r,o){for(var u=o-1,m=a.length;++u<m;)if(a[u]===r)return u;return-1}function Je(a,r,o){return r===r?qe(a,r,o):Ve(a,Ye,o)}function Qe(a,r){var o=a==null?0:a.length;return!!o&&Je(a,r,0)>-1}var We=1/0,Ze=F&&1/W(new F([,-0]))[1]==We?function(a){return new F(a)}:Ge,Xe=200;function en(a,r,o){var u=-1,m=Qe,v=a.length,t=!0,i=[],f=i;if(v>=Xe){var _=Ze(a);if(_)return W(_);t=!1,m=Oe,f=new xe}else f=i;e:for(;++u<v;){var k=a[u],S=k;if(k=k!==0?k:0,t&&S===S){for(var A=f.length;A--;)if(f[A]===S)continue e;i.push(k)}else m(f,S,o)||(f!==i&&f.push(S),i.push(k))}return i}var j=Ee(function(a){return en(Ie(a,1,Me,!0))});const nn=Ne({...Se,parsedValue:{type:ye(Array)}}),tn=["disabled"],an=Z({__name:"panel-time-range",props:nn,emits:["pick","select-range","set-picker-option"],setup(a,{emit:r}){const o=a,u=(e,n)=>{const l=[];for(let c=e;c<=n;c++)l.push(c);return l},{t:m,lang:v}=He(),t=Q("time"),i=Q("picker"),f=Fe("EP_PICKER_BASE"),{arrowControl:_,disabledHours:k,disabledMinutes:S,disabledSeconds:A,defaultValue:I}=f.props,ee=T(()=>[t.be("range-picker","body"),t.be("panel","content"),t.is("arrow",_),D.value?"has-seconds":""]),ne=T(()=>[t.be("range-picker","body"),t.be("panel","content"),t.is("arrow",_),D.value?"has-seconds":""]),P=T(()=>o.parsedValue[0]),C=T(()=>o.parsedValue[1]),te=Te(o),ae=()=>{r("pick",te.value,!1)},D=T(()=>o.format.includes("ss")),K=T(()=>o.format.includes("A")?"A":o.format.includes("a")?"a":""),se=(e=!1)=>{r("pick",[P.value,C.value],e)},oe=e=>{L(e.millisecond(0),C.value)},re=e=>{L(P.value,e.millisecond(0))},le=e=>{const n=e.map(c=>R(c).locale(v.value)),l=z(n);return n[0].isSame(l[0])&&n[1].isSame(l[1])},L=(e,n)=>{r("pick",[e,n],!0)},ie=T(()=>P.value>C.value),V=X([0,2]),ce=(e,n)=>{r("select-range",e,n,"min"),V.value=[e,n]},$=T(()=>D.value?11:8),ue=(e,n)=>{r("select-range",e,n,"max");const l=s($);V.value=[e+l,n+l]},de=e=>{const n=D.value?[0,3,6,11,14,17]:[0,3,8,11],l=["hours","minutes"].concat(D.value?["seconds"]:[]),d=(n.indexOf(V.value[0])+e+n.length)%n.length,p=n.length/2;d<p?B.start_emitSelectRange(l[d]):B.end_emitSelectRange(l[d-p])},pe=e=>{const n=e.code,{left:l,right:c,up:d,down:p}=Le;if([l,c].includes(n)){de(n===l?-1:1),e.preventDefault();return}if([d,p].includes(n)){const g=n===d?-1:1,w=V.value[0]<$.value?"start":"end";B[`${w}_scrollDown`](g),e.preventDefault();return}},M=(e,n)=>{const l=k?k(e):[],c=e==="start",p=(n||(c?C.value:P.value)).hour(),g=c?u(p+1,23):u(0,p-1);return j(l,g)},N=(e,n,l)=>{const c=S?S(e,n):[],d=n==="start",p=l||(d?C.value:P.value),g=p.hour();if(e!==g)return c;const w=p.minute(),H=d?u(w+1,59):u(0,w-1);return j(c,H)},y=(e,n,l,c)=>{const d=A?A(e,n,l):[],p=l==="start",g=c||(p?C.value:P.value),w=g.hour(),H=g.minute();if(e!==w||n!==H)return d;const q=g.second(),ke=p?u(q+1,59):u(0,q-1);return j(d,ke)},z=([e,n])=>[G(e,"start",!0,n),G(n,"end",!1,e)],{getAvailableHours:me,getAvailableMinutes:fe,getAvailableSeconds:be}=Pe(M,N,y),{timePickerOptions:B,getAvailableTime:G,onSetOption:Y}=_e({getAvailableHours:me,getAvailableMinutes:fe,getAvailableSeconds:be}),ve=e=>e?U(e)?e.map(n=>R(n,o.format).locale(v.value)):R(e,o.format).locale(v.value):null,ge=e=>e?U(e)?e.map(n=>n.format(o.format)):e.format(o.format):null,he=()=>{if(U(I))return I.map(n=>R(n).locale(v.value));const e=R(I).locale(v.value);return[e,e.add(60,"m")]};return r("set-picker-option",["formatToString",ge]),r("set-picker-option",["parseUserInput",ve]),r("set-picker-option",["isValidValue",le]),r("set-picker-option",["handleKeydownInput",pe]),r("set-picker-option",["getDefaultValue",he]),r("set-picker-option",["getRangeAvailableTime",z]),(e,n)=>e.actualVisible?(Ue(),je("div",{key:0,class:b([s(t).b("range-picker"),s(i).b("panel")])},[h("div",{class:b(s(t).be("range-picker","content"))},[h("div",{class:b(s(t).be("range-picker","cell"))},[h("div",{class:b(s(t).be("range-picker","header"))},x(s(m)("el.datepicker.startTime")),3),h("div",{class:b(s(ee))},[E(J,{ref:"minSpinner",role:"start","show-seconds":s(D),"am-pm-mode":s(K),"arrow-control":s(_),"spinner-date":s(P),"disabled-hours":M,"disabled-minutes":N,"disabled-seconds":y,onChange:oe,onSetOption:s(Y),onSelectRange:ce},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),h("div",{class:b(s(t).be("range-picker","cell"))},[h("div",{class:b(s(t).be("range-picker","header"))},x(s(m)("el.datepicker.endTime")),3),h("div",{class:b(s(ne))},[E(J,{ref:"maxSpinner",role:"end","show-seconds":s(D),"am-pm-mode":s(K),"arrow-control":s(_),"spinner-date":s(C),"disabled-hours":M,"disabled-minutes":N,"disabled-seconds":y,onChange:re,onSetOption:s(Y),onSelectRange:ue},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),h("div",{class:b(s(t).be("panel","footer"))},[h("button",{type:"button",class:b([s(t).be("panel","btn"),"cancel"]),onClick:n[0]||(n[0]=l=>ae())},x(s(m)("el.datepicker.cancel")),3),h("button",{type:"button",class:b([s(t).be("panel","btn"),"confirm"]),disabled:s(ie),onClick:n[1]||(n[1]=l=>se())},x(s(m)("el.datepicker.confirm")),11,tn)],2)],2)):Ke("v-if",!0)}});var sn=Be(an,[["__file","panel-time-range.vue"]]);R.extend(Ce);var on=Z({name:"ElTimePicker",install:null,props:{...De,isRange:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(a,r){const o=X(),[u,m]=a.isRange?["timerange",sn]:["time",we],v=t=>r.emit("update:modelValue",t);return $e("ElPopperOptions",a.popperOptions),r.expose({focus:t=>{var i;(i=o.value)==null||i.handleFocusInput(t)},blur:t=>{var i;(i=o.value)==null||i.handleBlurInput(t)},handleOpen:()=>{var t;(t=o.value)==null||t.handleOpen()},handleClose:()=>{var t;(t=o.value)==null||t.handleClose()}}),()=>{var t;const i=(t=a.format)!=null?t:Re;return E(Ae,ze(a,{ref:o,type:u,format:i,"onUpdate:modelValue":v}),{default:f=>E(m,f,null)})}}});const O=on;O.install=a=>{a.component(O.name,O)};const cn=O;export{cn as E};
