import{i as Sa,d as de,j as ue,k as Ta,_ as Se,l as Va,n as fe,p as Qe,q as ea,s as Pa,t as aa,h as m,v as j,o as v,b as x,x as X,c as z,y as ve,w as I,z as Y,A as T,F as re,B as ie,C as ta,D as na,G as La,H as S,r as ge,I as Da,J as se,K as Ma,L as xe,M as qe,N as _a,O as Re,P as me,Q as sa,R as be,S as Ia,U as we,T as $e,W as xa,X as Ue,Y as ae,Z as Fa,$ as la,a0 as ne,a1 as oa,a2 as za,a3 as H,a4 as Ba,a5 as Aa,a6 as Ha,a7 as Oa,a8 as Ka,a9 as qa,aa as Ra,ab as Ua,ac as Wa,ad as ja,ae as Za,af as Xa,ag as Ya,ah as ke,g as d,ai as Ga,E as Ja,aj as Qa,ak as et,al as We,am as je,an as at,ao as tt,ap as nt,aq as st,ar as Ze,as as lt,at as ot,au as it}from"./index-Ch7CaZpa.js";import{E as rt}from"./index-Da0kD0vL.js";import{u as Xe,c as Ye}from"./arrays-6TrVLtTe.js";import{c as ia}from"./cloneDeep-CywP5UrL.js";const ra=e=>!e.getAttribute("aria-owns"),ua=(e,t,s)=>{const{parentNode:n}=e;if(!n)return null;const o=n.querySelectorAll(s),p=Array.prototype.indexOf.call(o,e);return o[p+t]||null},Ce=e=>{e&&(e.focus(),!ra(e)&&e.click())};var ut=1/0;function ct(e){var t=e==null?0:e.length;return t?Sa(e,ut):[]}var dt=de({name:"NodeContent",setup(){return{ns:ue("cascader-node")}},render(){const{ns:e}=this,{node:t,panel:s}=this.$parent,{data:n,label:o}=t,{renderLabelFn:p}=s;return Ta("span",{class:e.e("label")},p?p({node:t,data:n}):o)}});const ze=Symbol(),pt=de({name:"ElCascaderNode",components:{ElCheckbox:Va,ElRadio:rt,NodeContent:dt,ElIcon:fe,Check:Qe,Loading:ea,ArrowRight:Pa},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:t}){const s=aa(ze),n=ue("cascader-node"),o=m(()=>s.isHoverMenu),p=m(()=>s.config.multiple),u=m(()=>s.config.checkStrictly),g=m(()=>{var y;return(y=s.checkedNodes[0])==null?void 0:y.uid}),c=m(()=>e.node.isDisabled),b=m(()=>e.node.isLeaf),C=m(()=>u.value&&!b.value||!c.value),P=m(()=>B(s.expandingNode)),L=m(()=>u.value&&s.checkedNodes.some(B)),B=y=>{var _;const{level:F,uid:Z}=e.node;return((_=y==null?void 0:y.pathNodes[F-1])==null?void 0:_.uid)===Z},O=()=>{P.value||s.expandNode(e.node)},K=y=>{const{node:_}=e;y!==_.checked&&s.handleCheckChange(_,y)},A=()=>{s.lazyLoad(e.node,()=>{b.value||O()})},V=y=>{o.value&&(q(),!b.value&&t("expand",y))},q=()=>{const{node:y}=e;!C.value||y.loading||(y.loaded?O():A())},D=()=>{o.value&&!b.value||(b.value&&!c.value&&!u.value&&!p.value?M(!0):q())},G=y=>{u.value?(K(y),e.node.loaded&&O()):M(y)},M=y=>{e.node.loaded?(K(y),!u.value&&O()):A()};return{panel:s,isHoverMenu:o,multiple:p,checkStrictly:u,checkedNodeId:g,isDisabled:c,isLeaf:b,expandable:C,inExpandingPath:P,inCheckedPath:L,ns:n,handleHoverExpand:V,handleExpand:q,handleClick:D,handleCheck:M,handleSelectCheck:G}}}),ht=["id","aria-haspopup","aria-owns","aria-expanded","tabindex"],ft=ie("span",null,null,-1);function vt(e,t,s,n,o,p){const u=j("el-checkbox"),g=j("el-radio"),c=j("check"),b=j("el-icon"),C=j("node-content"),P=j("loading"),L=j("arrow-right");return v(),x("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!e.isLeaf,"aria-owns":e.isLeaf?null:e.menuId,"aria-expanded":e.inExpandingPath,tabindex:e.expandable?-1:void 0,class:T([e.ns.b(),e.ns.is("selectable",e.checkStrictly),e.ns.is("active",e.node.checked),e.ns.is("disabled",!e.expandable),e.inExpandingPath&&"in-active-path",e.inCheckedPath&&"in-checked-path"]),onMouseenter:t[2]||(t[2]=(...B)=>e.handleHoverExpand&&e.handleHoverExpand(...B)),onFocus:t[3]||(t[3]=(...B)=>e.handleHoverExpand&&e.handleHoverExpand(...B)),onClick:t[4]||(t[4]=(...B)=>e.handleClick&&e.handleClick(...B))},[X(" prefix "),e.multiple?(v(),z(u,{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:e.isDisabled,onClick:t[0]||(t[0]=ve(()=>{},["stop"])),"onUpdate:modelValue":e.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onUpdate:modelValue"])):e.checkStrictly?(v(),z(g,{key:1,"model-value":e.checkedNodeId,label:e.node.uid,disabled:e.isDisabled,"onUpdate:modelValue":e.handleSelectCheck,onClick:t[1]||(t[1]=ve(()=>{},["stop"]))},{default:I(()=>[X(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),ft]),_:1},8,["model-value","label","disabled","onUpdate:modelValue"])):e.isLeaf&&e.node.checked?(v(),z(b,{key:2,class:T(e.ns.e("prefix"))},{default:I(()=>[Y(c)]),_:1},8,["class"])):X("v-if",!0),X(" content "),Y(C),X(" postfix "),e.isLeaf?X("v-if",!0):(v(),x(re,{key:3},[e.node.loading?(v(),z(b,{key:0,class:T([e.ns.is("loading"),e.ns.e("postfix")])},{default:I(()=>[Y(P)]),_:1},8,["class"])):(v(),z(b,{key:1,class:T(["arrow-right",e.ns.e("postfix")])},{default:I(()=>[Y(L)]),_:1},8,["class"]))],64))],42,ht)}var gt=Se(pt,[["render",vt],["__file","node.vue"]]);const mt=de({name:"ElCascaderMenu",components:{Loading:ea,ElIcon:fe,ElScrollbar:ta,ElCascaderNode:gt},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const t=Ma(),s=ue("cascader-menu"),{t:n}=na(),o=La();let p=null,u=null;const g=aa(ze),c=S(null),b=m(()=>!e.nodes.length),C=m(()=>!g.initialLoaded),P=m(()=>`${o.value}-${e.index}`),L=A=>{p=A.target},B=A=>{if(!(!g.isHoverMenu||!p||!c.value))if(p.contains(A.target)){O();const V=t.vnode.el,{left:q}=V.getBoundingClientRect(),{offsetWidth:D,offsetHeight:G}=V,M=A.clientX-q,y=p.offsetTop,_=y+p.offsetHeight;c.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${M} ${y} L${D} 0 V${y} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${M} ${_} L${D} ${G} V${_} Z" />
        `}else u||(u=window.setTimeout(K,g.config.hoverThreshold))},O=()=>{u&&(clearTimeout(u),u=null)},K=()=>{c.value&&(c.value.innerHTML="",O())};return{ns:s,panel:g,hoverZone:c,isEmpty:b,isLoading:C,menuId:P,t:n,handleExpand:L,handleMouseMove:B,clearHoverZone:K}}});function bt(e,t,s,n,o,p){const u=j("el-cascader-node"),g=j("loading"),c=j("el-icon"),b=j("el-scrollbar");return v(),z(b,{key:e.menuId,tag:"ul",role:"menu",class:T(e.ns.b()),"wrap-class":e.ns.e("wrap"),"view-class":[e.ns.e("list"),e.ns.is("empty",e.isEmpty)],onMousemove:e.handleMouseMove,onMouseleave:e.clearHoverZone},{default:I(()=>{var C;return[(v(!0),x(re,null,ge(e.nodes,P=>(v(),z(u,{key:P.uid,node:P,"menu-id":e.menuId,onExpand:e.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),e.isLoading?(v(),x("div",{key:0,class:T(e.ns.e("empty-text"))},[Y(c,{size:"14",class:T(e.ns.is("loading"))},{default:I(()=>[Y(g)]),_:1},8,["class"]),Da(" "+se(e.t("el.cascader.loading")),1)],2)):e.isEmpty?(v(),x("div",{key:1,class:T(e.ns.e("empty-text"))},se(e.t("el.cascader.noData")),3)):(C=e.panel)!=null&&C.isHoverMenu?(v(),x("svg",{key:2,ref:"hoverZone",class:T(e.ns.e("hover-zone"))},null,2)):X("v-if",!0)]}),_:1},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var yt=Se(mt,[["render",bt],["__file","menu.vue"]]);let kt=0;const Ct=e=>{const t=[e];let{parent:s}=e;for(;s;)t.unshift(s),s=s.parent;return t};class ce{constructor(t,s,n,o=!1){this.data=t,this.config=s,this.parent=n,this.root=o,this.uid=kt++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:p,label:u,children:g}=s,c=t[g],b=Ct(this);this.level=o?0:n?n.level+1:1,this.value=t[p],this.label=t[u],this.pathNodes=b,this.pathValues=b.map(C=>C.value),this.pathLabels=b.map(C=>C.label),this.childrenData=c,this.children=(c||[]).map(C=>new ce(C,s,this)),this.loaded=!s.lazy||this.isLeaf||!xe(c)}get isDisabled(){const{data:t,parent:s,config:n}=this,{disabled:o,checkStrictly:p}=n;return(qe(o)?o(t,this):!!t[o])||!p&&(s==null?void 0:s.isDisabled)}get isLeaf(){const{data:t,config:s,childrenData:n,loaded:o}=this,{lazy:p,leaf:u}=s,g=qe(u)?u(t,this):t[u];return _a(g)?p&&!o?!1:!(Array.isArray(n)&&n.length):!!g}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(t){const{childrenData:s,children:n}=this,o=new ce(t,this.config,this);return Array.isArray(s)?s.push(t):this.childrenData=[t],n.push(o),o}calcText(t,s){const n=t?this.pathLabels.join(s):this.label;return this.text=n,n}broadcast(t,...s){const n=`onParent${Re(t)}`;this.children.forEach(o=>{o&&(o.broadcast(t,...s),o[n]&&o[n](...s))})}emit(t,...s){const{parent:n}=this,o=`onChild${Re(t)}`;n&&(n[o]&&n[o](...s),n.emit(t,...s))}onParentCheck(t){this.isDisabled||this.setCheckState(t)}onChildCheck(){const{children:t}=this,s=t.filter(o=>!o.isDisabled),n=s.length?s.every(o=>o.checked):!1;this.setCheckState(n)}setCheckState(t){const s=this.children.length,n=this.children.reduce((o,p)=>{const u=p.checked?1:p.indeterminate?.5:0;return o+u},0);this.checked=this.loaded&&this.children.filter(o=>!o.isDisabled).every(o=>o.loaded&&o.checked)&&t,this.indeterminate=this.loaded&&n!==s&&n>0}doCheck(t){if(this.checked===t)return;const{checkStrictly:s,multiple:n}=this.config;s||!n?this.checked=t:(this.broadcast("check",t),this.setCheckState(t),this.emit("check"))}}const Fe=(e,t)=>e.reduce((s,n)=>(n.isLeaf?s.push(n):(!t&&s.push(n),s=s.concat(Fe(n.children,t))),s),[]);class Ge{constructor(t,s){this.config=s;const n=(t||[]).map(o=>new ce(o,this.config));this.nodes=n,this.allNodes=Fe(n,!1),this.leafNodes=Fe(n,!0)}getNodes(){return this.nodes}getFlattedNodes(t){return t?this.leafNodes:this.allNodes}appendNode(t,s){const n=s?s.appendChild(t):new ce(t,this.config);s||this.nodes.push(n),this.allNodes.push(n),n.isLeaf&&this.leafNodes.push(n)}appendNodes(t,s){t.forEach(n=>this.appendNode(n,s))}getNodeByValue(t,s=!1){return!t&&t!==0?null:this.getFlattedNodes(s).find(o=>me(o.value,t)||me(o.pathValues,t))||null}getSameNode(t){return t&&this.getFlattedNodes(!1).find(({value:n,level:o})=>me(t.value,n)&&t.level===o)||null}}const ca=sa({modelValue:{type:be([Number,String,Array])},options:{type:be(Array),default:()=>[]},props:{type:be(Object),default:()=>({})}}),Nt={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:Ia,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},Et=e=>m(()=>({...Nt,...e.props})),Je=e=>{if(!e)return 0;const t=e.id.split("-");return Number(t[t.length-2])},wt=e=>{if(!e)return;const t=e.querySelector("input");t?t.click():ra(e)&&e.click()},$t=(e,t)=>{const s=t.slice(0),n=s.map(p=>p.uid),o=e.reduce((p,u)=>{const g=n.indexOf(u.uid);return g>-1&&(p.push(u),s.splice(g,1),n.splice(g,1)),p},[]);return o.push(...s),o},St=de({name:"ElCascaderPanel",components:{ElCascaderMenu:yt},props:{...ca,border:{type:Boolean,default:!0},renderLabel:Function},emits:[we,$e,"close","expand-change"],setup(e,{emit:t,slots:s}){let n=!1;const o=ue("cascader"),p=Et(e);let u=null;const g=S(!0),c=S([]),b=S(null),C=S([]),P=S(null),L=S([]),B=m(()=>p.value.expandTrigger==="hover"),O=m(()=>e.renderLabel||s.default),K=()=>{const{options:r}=e,f=p.value;n=!1,u=new Ge(r,f),C.value=[u.getNodes()],f.lazy&&xe(e.options)?(g.value=!1,A(void 0,h=>{h&&(u=new Ge(h,f),C.value=[u.getNodes()]),g.value=!0,F(!1,!0)})):F(!1,!0)},A=(r,f)=>{const h=p.value;r=r||new ce({},h,void 0,!0),r.loading=!0;const N=w=>{const E=r,U=E.root?null:E;w&&(u==null||u.appendNodes(w,U)),E.loading=!1,E.loaded=!0,E.childrenData=E.childrenData||[],f&&f(w)};h.lazyLoad(r,N)},V=(r,f)=>{var h;const{level:N}=r,w=C.value.slice(0,N);let E;r.isLeaf?E=r.pathNodes[N-2]:(E=r,w.push(r.children)),((h=P.value)==null?void 0:h.uid)!==(E==null?void 0:E.uid)&&(P.value=r,C.value=w,!f&&t("expand-change",(r==null?void 0:r.pathValues)||[]))},q=(r,f,h=!0)=>{const{checkStrictly:N,multiple:w}=p.value,E=L.value[0];n=!0,!w&&(E==null||E.doCheck(!1)),r.doCheck(f),_(),h&&!w&&!N&&t("close"),!h&&!w&&!N&&D(r)},D=r=>{r&&(r=r.parent,D(r),r&&V(r))},G=r=>u==null?void 0:u.getFlattedNodes(r),M=r=>{var f;return(f=G(r))==null?void 0:f.filter(h=>h.checked!==!1)},y=()=>{L.value.forEach(r=>r.doCheck(!1)),_(),C.value=C.value.slice(0,1),P.value=null,t("expand-change",[])},_=()=>{var r;const{checkStrictly:f,multiple:h}=p.value,N=L.value,w=M(!f),E=$t(N,w),U=E.map($=>$.valueByOption);L.value=E,b.value=h?U:(r=U[0])!=null?r:null},F=(r=!1,f=!1)=>{const{modelValue:h}=e,{lazy:N,multiple:w,checkStrictly:E}=p.value,U=!E;if(!(!g.value||n||!f&&me(h,b.value)))if(N&&!r){const te=Xe(ct(Ye(h))).map(W=>u==null?void 0:u.getNodeByValue(W)).filter(W=>!!W&&!W.loaded&&!W.loading);te.length?te.forEach(W=>{A(W,()=>F(!1,f))}):F(!0,f)}else{const $=w?Ye(h):[h],te=Xe($.map(W=>u==null?void 0:u.getNodeByValue(W,U)));Z(te,f),b.value=ia(h)}},Z=(r,f=!0)=>{const{checkStrictly:h}=p.value,N=L.value,w=r.filter($=>!!$&&(h||$.isLeaf)),E=u==null?void 0:u.getSameNode(P.value),U=f&&E||w[0];U?U.pathNodes.forEach($=>V($,!0)):P.value=null,N.forEach($=>$.doCheck(!1)),Ue(w).forEach($=>$.doCheck(!0)),L.value=w,ne(le)},le=()=>{oa&&c.value.forEach(r=>{const f=r==null?void 0:r.$el;if(f){const h=f.querySelector(`.${o.namespace.value}-scrollbar__wrap`),N=f.querySelector(`.${o.b("node")}.${o.is("active")}`)||f.querySelector(`.${o.b("node")}.in-active-path`);za(h,N)}})},pe=r=>{const f=r.target,{code:h}=r;switch(h){case H.up:case H.down:{r.preventDefault();const N=h===H.up?-1:1;Ce(ua(f,N,`.${o.b("node")}[tabindex="-1"]`));break}case H.left:{r.preventDefault();const N=c.value[Je(f)-1],w=N==null?void 0:N.$el.querySelector(`.${o.b("node")}[aria-expanded="true"]`);Ce(w);break}case H.right:{r.preventDefault();const N=c.value[Je(f)+1],w=N==null?void 0:N.$el.querySelector(`.${o.b("node")}[tabindex="-1"]`);Ce(w);break}case H.enter:wt(f);break}};return xa(ze,Ue({config:p,expandingNode:P,checkedNodes:L,isHoverMenu:B,initialLoaded:g,renderLabelFn:O,lazyLoad:A,expandNode:V,handleCheckChange:q})),ae([p,()=>e.options],K,{deep:!0,immediate:!0}),ae(()=>e.modelValue,()=>{n=!1,F()},{deep:!0}),ae(()=>b.value,r=>{me(r,e.modelValue)||(t(we,r),t($e,r))}),Fa(()=>c.value=[]),la(()=>!xe(e.modelValue)&&F()),{ns:o,menuList:c,menus:C,checkedNodes:L,handleKeyDown:pe,handleCheckChange:q,getFlattedNodes:G,getCheckedNodes:M,clearCheckedNodes:y,calculateCheckedValue:_,scrollToExpandingNode:le}}});function Tt(e,t,s,n,o,p){const u=j("el-cascader-menu");return v(),x("div",{class:T([e.ns.b("panel"),e.ns.is("bordered",e.border)]),onKeydown:t[0]||(t[0]=(...g)=>e.handleKeyDown&&e.handleKeyDown(...g))},[(v(!0),x(re,null,ge(e.menus,(g,c)=>(v(),z(u,{key:c,ref_for:!0,ref:b=>e.menuList[c]=b,index:c,nodes:[...g]},null,8,["index","nodes"]))),128))],34)}var Ne=Se(St,[["render",Tt],["__file","index.vue"]]);Ne.install=e=>{e.component(Ne.name,Ne)};const Vt=Ne,Pt=sa({...ca,size:Ba,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:be(Function),default:(e,t)=>e.text.includes(t)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:be(Function),default:()=>!0},popperClass:{type:String,default:""},teleported:Aa.teleported,tagType:{...Ha.type,default:"info"},validateEvent:{type:Boolean,default:!0},...Oa}),Lt={[we]:e=>!0,[$e]:e=>!0,focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,visibleChange:e=>Ka(e),expandChange:e=>!!e,removeTag:e=>!!e},Dt={key:0},Mt=["placeholder","onKeydown"],_t=["onClick"],It="ElCascader",xt=de({name:It}),Ft=de({...xt,props:Pt,emits:Lt,setup(e,{expose:t,emit:s}){const n=e,o={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:a})=>{const{modifiersData:l,placement:i}=a;["right","left","bottom","top"].includes(i)||(l.arrow.x=35)},requires:["arrow"]}]},p=qa();let u=0,g=0;const c=ue("cascader"),b=ue("input"),{t:C}=na(),{form:P,formItem:L}=Ra(),{valueOnClear:B}=Ua(n),O=S(null),K=S(null),A=S(null),V=S(null),q=S(null),D=S(!1),G=S(!1),M=S(!1),y=S(!1),_=S(""),F=S(""),Z=S([]),le=S([]),pe=S([]),r=S(!1),f=m(()=>p.style),h=m(()=>n.disabled||(P==null?void 0:P.disabled)),N=m(()=>n.placeholder||C("el.cascader.placeholder")),w=m(()=>F.value||Z.value.length>0||r.value?"":N.value),E=Wa(),U=m(()=>["small"].includes(E.value)?"small":"default"),$=m(()=>!!n.props.multiple),te=m(()=>!n.filterable||$.value),W=m(()=>$.value?F.value:_.value),ye=m(()=>{var a;return((a=V.value)==null?void 0:a.checkedNodes)||[]}),da=m(()=>!n.clearable||h.value||M.value||!G.value?!1:!!ye.value.length),Te=m(()=>{const{showAllLevels:a,separator:l}=n,i=ye.value;return i.length?$.value?"":i[0].calcText(a,l):""}),pa=m(()=>(L==null?void 0:L.validateState)||""),Ve=m({get(){return ia(n.modelValue)},set(a){const l=a||B.value;s(we,l),s($e,l),n.validateEvent&&(L==null||L.validate("change").catch(i=>ja()))}}),ha=m(()=>[c.b(),c.m(E.value),c.is("disabled",h.value),p.class]),fa=m(()=>[b.e("icon"),"icon-arrow-down",c.is("reverse",D.value)]),va=m(()=>c.is("focus",D.value||y.value)),Be=m(()=>{var a,l;return(l=(a=O.value)==null?void 0:a.popperRef)==null?void 0:l.contentRef}),R=a=>{var l,i,k;h.value||(a=a??!D.value,a!==D.value&&(D.value=a,(i=(l=K.value)==null?void 0:l.input)==null||i.setAttribute("aria-expanded",`${a}`),a?(he(),ne((k=V.value)==null?void 0:k.scrollToExpandingNode)):n.filterable&&_e(),s("visibleChange",a)))},he=()=>{ne(()=>{var a;(a=O.value)==null||a.updatePopper()})},Pe=()=>{M.value=!1},Le=a=>{const{showAllLevels:l,separator:i}=n;return{node:a,key:a.uid,text:a.calcText(l,i),hitState:!1,closable:!h.value&&!a.isDisabled,isCollapseTag:!1}},De=a=>{var l;const i=a.node;i.doCheck(!1),(l=V.value)==null||l.calculateCheckedValue(),s("removeTag",i.valueByOption)},ga=()=>{if(!$.value)return;const a=ye.value,l=[],i=[];if(a.forEach(k=>i.push(Le(k))),le.value=i,a.length){a.slice(0,n.maxCollapseTags).forEach(J=>l.push(Le(J)));const k=a.slice(n.maxCollapseTags),Q=k.length;Q&&(n.collapseTags?l.push({key:-1,text:`+ ${Q}`,closable:!1,isCollapseTag:!0}):k.forEach(J=>l.push(Le(J))))}Z.value=l},Ae=()=>{var a,l;const{filterMethod:i,showAllLevels:k,separator:Q}=n,J=(l=(a=V.value)==null?void 0:a.getFlattedNodes(!n.props.checkStrictly))==null?void 0:l.filter(ee=>ee.isDisabled?!1:(ee.calcText(k,Q),i(ee,W.value)));$.value&&(Z.value.forEach(ee=>{ee.hitState=!1}),le.value.forEach(ee=>{ee.hitState=!1})),M.value=!0,pe.value=J,he()},ma=()=>{var a;let l;M.value&&q.value?l=q.value.$el.querySelector(`.${c.e("suggestion-item")}`):l=(a=V.value)==null?void 0:a.$el.querySelector(`.${c.b("node")}[tabindex="-1"]`),l&&(l.focus(),!M.value&&l.click())},Me=()=>{var a,l;const i=(a=K.value)==null?void 0:a.input,k=A.value,Q=(l=q.value)==null?void 0:l.$el;if(!(!oa||!i)){if(Q){const J=Q.querySelector(`.${c.e("suggestion-list")}`);J.style.minWidth=`${i.offsetWidth}px`}if(k){const{offsetHeight:J}=k,ee=Z.value.length>0?`${Math.max(J+6,u)}px`:`${u}px`;i.style.height=ee,he()}}},ba=a=>{var l;return(l=V.value)==null?void 0:l.getCheckedNodes(a)},ya=a=>{he(),s("expandChange",a)},oe=a=>{var l;const i=(l=a.target)==null?void 0:l.value;if(a.type==="compositionend")r.value=!1,ne(()=>Ie(i));else{const k=i[i.length-1]||"";r.value=!ot(k)}},ka=a=>{if(!r.value)switch(a.code){case H.enter:R();break;case H.down:R(!0),ne(ma),a.preventDefault();break;case H.esc:D.value===!0&&(a.preventDefault(),a.stopPropagation(),R(!1));break;case H.tab:R(!1);break}},Ca=()=>{var a;(a=V.value)==null||a.clearCheckedNodes(),!D.value&&n.filterable&&_e(),R(!1),s("clear")},_e=()=>{const{value:a}=Te;_.value=a,F.value=a},Na=a=>{var l,i;const{checked:k}=a;$.value?(l=V.value)==null||l.handleCheckChange(a,!k,!1):(!k&&((i=V.value)==null||i.handleCheckChange(a,!0,!1)),R(!1))},Ea=a=>{const l=a.target,{code:i}=a;switch(i){case H.up:case H.down:{const k=i===H.up?-1:1;Ce(ua(l,k,`.${c.e("suggestion-item")}[tabindex="-1"]`));break}case H.enter:l.click();break}},wa=()=>{const a=Z.value,l=a[a.length-1];g=F.value?0:g+1,!(!l||!g||n.collapseTags&&a.length>1)&&(l.hitState?De(l):l.hitState=!0)},He=a=>{const l=a.target,i=c.e("search-input");l.className===i&&(y.value=!0),s("focus",a)},Oe=a=>{y.value=!1,s("blur",a)},$a=Za(()=>{const{value:a}=W;if(!a)return;const l=n.beforeFilter(a);Xa(l)?l.then(Ae).catch(()=>{}):l!==!1?Ae():Pe()},n.debounce),Ie=(a,l)=>{!D.value&&R(!0),!(l!=null&&l.isComposing)&&(a?$a():Pe())},Ke=a=>Number.parseFloat(it(b.cssVarName("input-height"),a).value)-2;return ae(M,he),ae([ye,h],ga),ae(Z,()=>{ne(()=>Me())}),ae(E,async()=>{await ne();const a=K.value.input;u=Ke(a)||u,Me()}),ae(Te,_e,{immediate:!0}),la(()=>{const a=K.value.input,l=Ke(a);u=a.offsetHeight||l,Ya(a,Me)}),t({getCheckedNodes:ba,cascaderPanelRef:V,togglePopperVisible:R,contentRef:Be}),(a,l)=>(v(),z(d(je),{ref_key:"tooltipRef",ref:O,visible:D.value,teleported:a.teleported,"popper-class":[d(c).e("dropdown"),a.popperClass],"popper-options":o,"fallback-placements":["bottom-start","bottom","top-start","top","right","left"],"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:"bottom-start",transition:`${d(c).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:"",onHide:Pe},{default:I(()=>[ke((v(),x("div",{class:T(d(ha)),style:Ga(d(f)),onClick:l[5]||(l[5]=()=>R(d(te)?void 0:!0)),onKeydown:ka,onMouseenter:l[6]||(l[6]=i=>G.value=!0),onMouseleave:l[7]||(l[7]=i=>G.value=!1)},[Y(d(Ja),{ref_key:"input",ref:K,modelValue:_.value,"onUpdate:modelValue":l[1]||(l[1]=i=>_.value=i),placeholder:d(w),readonly:d(te),disabled:d(h),"validate-event":!1,size:d(E),class:T(d(va)),tabindex:d($)&&a.filterable&&!d(h)?-1:void 0,onCompositionstart:oe,onCompositionupdate:oe,onCompositionend:oe,onFocus:He,onBlur:Oe,onInput:Ie},{suffix:I(()=>[d(da)?(v(),z(d(fe),{key:"clear",class:T([d(b).e("icon"),"icon-circle-close"]),onClick:ve(Ca,["stop"])},{default:I(()=>[Y(d(Qa))]),_:1},8,["class","onClick"])):(v(),z(d(fe),{key:"arrow-down",class:T(d(fa)),onClick:l[0]||(l[0]=ve(i=>R(),["stop"]))},{default:I(()=>[Y(d(et))]),_:1},8,["class"]))]),_:1},8,["modelValue","placeholder","readonly","disabled","size","class","tabindex"]),d($)?(v(),x("div",{key:0,ref_key:"tagWrapper",ref:A,class:T([d(c).e("tags"),d(c).is("validate",!!d(pa))])},[(v(!0),x(re,null,ge(Z.value,i=>(v(),z(d(We),{key:i.key,type:a.tagType,size:d(U),hit:i.hitState,closable:i.closable,"disable-transitions":"",onClose:k=>De(i)},{default:I(()=>[i.isCollapseTag===!1?(v(),x("span",Dt,se(i.text),1)):(v(),z(d(je),{key:1,disabled:D.value||!a.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:I(()=>[ie("span",null,se(i.text),1)]),content:I(()=>[ie("div",{class:T(d(c).e("collapse-tags"))},[(v(!0),x(re,null,ge(le.value.slice(a.maxCollapseTags),(k,Q)=>(v(),x("div",{key:Q,class:T(d(c).e("collapse-tag"))},[(v(),z(d(We),{key:k.key,class:"in-tooltip",type:a.tagType,size:d(U),hit:k.hitState,closable:k.closable,"disable-transitions":"",onClose:J=>De(k)},{default:I(()=>[ie("span",null,se(k.text),1)]),_:2},1032,["type","size","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","hit","closable","onClose"]))),128)),a.filterable&&!d(h)?ke((v(),x("input",{key:0,"onUpdate:modelValue":l[2]||(l[2]=i=>F.value=i),type:"text",class:T(d(c).e("search-input")),placeholder:d(Te)?"":d(N),onInput:l[3]||(l[3]=i=>Ie(F.value,i)),onClick:l[4]||(l[4]=ve(i=>R(!0),["stop"])),onKeydown:at(wa,["delete"]),onCompositionstart:oe,onCompositionupdate:oe,onCompositionend:oe,onFocus:He,onBlur:Oe},null,42,Mt)),[[tt,F.value]]):X("v-if",!0)],2)):X("v-if",!0)],38)),[[d(nt),()=>R(!1),d(Be)]])]),content:I(()=>[ke(Y(d(Vt),{ref_key:"cascaderPanelRef",ref:V,modelValue:d(Ve),"onUpdate:modelValue":l[8]||(l[8]=i=>st(Ve)?Ve.value=i:null),options:a.options,props:n.props,border:!1,"render-label":a.$slots.default,onExpandChange:ya,onClose:l[9]||(l[9]=i=>a.$nextTick(()=>R(!1)))},null,8,["modelValue","options","props","render-label"]),[[Ze,!M.value]]),a.filterable?ke((v(),z(d(ta),{key:0,ref_key:"suggestionPanel",ref:q,tag:"ul",class:T(d(c).e("suggestion-panel")),"view-class":d(c).e("suggestion-list"),onKeydown:Ea},{default:I(()=>[pe.value.length?(v(!0),x(re,{key:0},ge(pe.value,i=>(v(),x("li",{key:i.uid,class:T([d(c).e("suggestion-item"),d(c).is("checked",i.checked)]),tabindex:-1,onClick:k=>Na(i)},[ie("span",null,se(i.text),1),i.checked?(v(),z(d(fe),{key:0},{default:I(()=>[Y(d(Qe))]),_:1})):X("v-if",!0)],10,_t))),128)):lt(a.$slots,"empty",{key:1},()=>[ie("li",{class:T(d(c).e("empty-text"))},se(d(C)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[Ze,M.value]]):X("v-if",!0)]),_:3},8,["visible","teleported","popper-class","transition"]))}});var Ee=Se(Ft,[["__file","cascader.vue"]]);Ee.install=e=>{e.component(Ee.name,Ee)};const zt=Ee,Kt=zt;export{Kt as E};
