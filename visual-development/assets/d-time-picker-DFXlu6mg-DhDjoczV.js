import{cK as N,cL as Y,cM as we,bD as ye,bE as Ce,d as K,r as Z,a7 as De,e as x,m as ee,bK as Ae,ay as J,y as _e,p as S,o as ae,c as Oe,u as s,ce as Te,c3 as Re,cN as xe,cO as Be,bR as Ee,bH as W,T as Me,a as Pe,b as g,j as b,t as R,D as He,cP as Ie,cj as $,c7 as Ne,cQ as $e}from"./index-BZtV8Jll.js";import{n as je,w as _,D as Ke,a as Ge,T as Ue,o as qe,C as ze,h as Le,g as X,f as Qe,p as Fe}from"./panel-time-pick-Y90k4CJp-DitUqeLL.js";function Je(){}function We(t){return t!==t}function Xe(t,l,r){for(var u=r-1,c=t.length;++u<c;)if(t[u]===l)return u;return-1}function Ye(t,l,r){return l===l?Xe(t,l,r):$e(t,We,r)}function Ze(t,l){var r=t==null?0:t.length;return!!r&&Ye(t,l,0)>-1}var ea=1/0,aa=N&&1/Y(new N([,-0]))[1]==ea?function(t){return new N(t)}:Je,na=200;function ta(t,l,r){var u=-1,c=Ze,v=t.length,n=!0,m=[],p=m;if(v>=na){var h=aa(t);if(h)return Y(h);n=!1,c=Ie,p=new xe}else p=m;e:for(;++u<v;){var f=t[u],V=f;if(f=f!==0?f:0,n&&V===V){for(var O=p.length;O--;)if(p[O]===V)continue e;m.push(f)}else c(p,V,r)||(p!==m&&p.push(V),m.push(f))}return m}var j=we(function(t){return ta(Te(t,1,Be,!0))});const sa=ye({...je,parsedValue:{type:Ce(Array)}}),ra=K({__name:"panel-time-range",props:sa,emits:["pick","select-range","set-picker-option"],setup(t,{emit:l}){const r=t,u=(e,a)=>{const o=[];for(let i=e;i<=a;i++)o.push(i);return o},{t:c,lang:v}=Ee(),n=W("time"),m=W("picker"),p=Me("EP_PICKER_BASE"),{arrowControl:h,disabledHours:f,disabledMinutes:V,disabledSeconds:O,defaultValue:B}=p.props,ne=S(()=>[n.be("range-picker","body"),n.be("panel","content"),n.is("arrow",h),C.value?"has-seconds":""]),te=S(()=>[n.be("range-picker","body"),n.be("panel","content"),n.is("arrow",h),C.value?"has-seconds":""]),w=S(()=>r.parsedValue[0]),y=S(()=>r.parsedValue[1]),se=Le(r),re=()=>{l("pick",se.value,!1)},C=S(()=>r.format.includes("ss")),G=S(()=>r.format.includes("A")?"A":r.format.includes("a")?"a":""),le=(e=!1)=>{l("pick",[w.value,y.value],e)},oe=e=>{U(e.millisecond(0),y.value)},ie=e=>{U(w.value,e.millisecond(0))},ue=e=>{const a=e.map(i=>_(i).locale(v.value)),o=z(a);return a[0].isSame(o[0])&&a[1].isSame(o[1])},U=(e,a)=>{r.visible&&l("pick",[e,a],!0)},ce=S(()=>w.value>y.value),T=Z([0,2]),pe=(e,a)=>{l("select-range",e,a,"min"),T.value=[e,a]},q=S(()=>C.value?11:8),de=(e,a)=>{l("select-range",e,a,"max");const o=s(q);T.value=[e+o,a+o]},me=e=>{const a=C.value?[0,3,6,11,14,17]:[0,3,8,11],o=["hours","minutes"].concat(C.value?["seconds"]:[]),i=(a.indexOf(T.value[0])+e+a.length)%a.length,d=a.length/2;i<d?H.start_emitSelectRange(o[i]):H.end_emitSelectRange(o[i-d])},ve=e=>{const a=e.code,{left:o,right:i,up:d,down:k}=Ne;if([o,i].includes(a)){me(a===o?-1:1),e.preventDefault();return}if([d,k].includes(a)){const D=a===d?-1:1,A=T.value[0]<q.value?"start":"end";H[`${A}_scrollDown`](D),e.preventDefault();return}},E=(e,a)=>{const o=f?f(e):[],i=e==="start",d=(a||(i?y.value:w.value)).hour(),k=i?u(d+1,23):u(0,d-1);return j(o,k)},M=(e,a,o)=>{const i=V?V(e,a):[],d=a==="start",k=o||(d?y.value:w.value),D=k.hour();if(e!==D)return i;const A=k.minute(),I=d?u(A+1,59):u(0,A-1);return j(i,I)},P=(e,a,o,i)=>{const d=O?O(e,a,o):[],k=o==="start",D=i||(k?y.value:w.value),A=D.hour(),I=D.minute();if(e!==A||a!==I)return d;const F=D.second(),Ve=k?u(F+1,59):u(0,F-1);return j(d,Ve)},z=([e,a])=>[L(e,"start",!0,a),L(a,"end",!1,e)],{getAvailableHours:fe,getAvailableMinutes:be,getAvailableSeconds:ge}=Fe(E,M,P),{timePickerOptions:H,getAvailableTime:L,onSetOption:Q}=Qe({getAvailableHours:fe,getAvailableMinutes:be,getAvailableSeconds:ge}),he=e=>e?$(e)?e.map(a=>_(a,r.format).locale(v.value)):_(e,r.format).locale(v.value):null,ke=e=>e?$(e)?e.map(a=>a.format(r.format)):e.format(r.format):null,Se=()=>{if($(B))return B.map(a=>_(a).locale(v.value));const e=_(B).locale(v.value);return[e,e.add(60,"m")]};return l("set-picker-option",["formatToString",ke]),l("set-picker-option",["parseUserInput",he]),l("set-picker-option",["isValidValue",ue]),l("set-picker-option",["handleKeydownInput",ve]),l("set-picker-option",["getDefaultValue",Se]),l("set-picker-option",["getRangeAvailableTime",z]),(e,a)=>e.actualVisible?(ae(),Pe("div",{key:0,class:b([s(n).b("range-picker"),s(m).b("panel")])},[g("div",{class:b(s(n).be("range-picker","content"))},[g("div",{class:b(s(n).be("range-picker","cell"))},[g("div",{class:b(s(n).be("range-picker","header"))},R(s(c)("el.datepicker.startTime")),3),g("div",{class:b(s(ne))},[x(X,{ref:"minSpinner",role:"start","show-seconds":s(C),"am-pm-mode":s(G),"arrow-control":s(h),"spinner-date":s(w),"disabled-hours":E,"disabled-minutes":M,"disabled-seconds":P,onChange:oe,onSetOption:s(Q),onSelectRange:pe},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),g("div",{class:b(s(n).be("range-picker","cell"))},[g("div",{class:b(s(n).be("range-picker","header"))},R(s(c)("el.datepicker.endTime")),3),g("div",{class:b(s(te))},[x(X,{ref:"maxSpinner",role:"end","show-seconds":s(C),"am-pm-mode":s(G),"arrow-control":s(h),"spinner-date":s(y),"disabled-hours":E,"disabled-minutes":M,"disabled-seconds":P,onChange:ie,onSetOption:s(Q),onSelectRange:de},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),g("div",{class:b(s(n).be("panel","footer"))},[g("button",{type:"button",class:b([s(n).be("panel","btn"),"cancel"]),onClick:o=>re()},R(s(c)("el.datepicker.cancel")),11,["onClick"]),g("button",{type:"button",class:b([s(n).be("panel","btn"),"confirm"]),disabled:s(ce),onClick:o=>le()},R(s(c)("el.datepicker.confirm")),11,["disabled","onClick"])],2)],2)):He("v-if",!0)}});var la=Re(ra,[["__file","panel-time-range.vue"]]);_.extend(Ke);var oa=K({name:"ElTimePicker",install:null,props:{...Ge,isRange:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,l){const r=Z(),[u,c]=t.isRange?["timerange",la]:["time",Ue],v=n=>l.emit("update:modelValue",n);return De("ElPopperOptions",t.popperOptions),l.expose({focus:()=>{var n;(n=r.value)==null||n.focus()},blur:()=>{var n;(n=r.value)==null||n.blur()},handleOpen:()=>{var n;(n=r.value)==null||n.handleOpen()},handleClose:()=>{var n;(n=r.value)==null||n.handleClose()}}),()=>{var n;const m=(n=t.format)!=null?n:qe;return x(ze,ee(t,{ref:r,type:u,format:m,"onUpdate:modelValue":v}),{default:p=>x(c,p,null)})}}});const ia=Ae(oa),pa=K({__name:"d-time-picker",props:J({designData:{}},{modelValue:{},modelModifiers:{}}),emits:J(["change"],["update:modelValue"]),setup(t,{emit:l}){const r=t,u=l,c=_e(t,"modelValue"),v=S(()=>r.designData.options);function n(m){u("change",m)}return(m,p)=>{const h=ia;return ae(),Oe(h,ee({"value-format":"x"},s(v),{modelValue:c.value,"onUpdate:modelValue":p[0]||(p[0]=f=>c.value=f),onChange:n}),null,16,["modelValue"])}}});export{pa as default};
