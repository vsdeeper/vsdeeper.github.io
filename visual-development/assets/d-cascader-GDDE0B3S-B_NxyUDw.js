import{bD as la,bE as oe,d as se,bF as xe,bG as Ne,bH as ue,r as $,p as m,a7 as Va,ad as Re,W as te,bI as _a,a0 as ta,bJ as Me,bK as na,bL as La,bM as Da,bN as Ma,bO as Ue,bP as Ba,bQ as Pa,bR as oa,bS as za,bT as Fa,bU as Ha,bV as Aa,bW as Ia,bX as qa,bY as Ra,bZ as Ua,o as v,c as F,w as D,af as ye,u as d,b_ as Oa,a as z,e as G,b$ as he,j as S,I as ve,bt as ja,au as Ka,c0 as Za,F as ce,A as fe,at as Wa,by as Ga,C as W,n as Ja,ag as Oe,q as we,B as Qa,c1 as sa,b as ie,t as ne,c2 as je,ay as Ke,y as Xa,m as Ya,c3 as Ee,c4 as me,X as de,c5 as ia,c6 as el,c7 as P,c8 as Ce,c9 as da,ca as al,cb as ll,cc as Ze,cd as ca,ce as tl,cf as ua,R as nl,cg as ol,T as ra,aF as j,z as We,ch as Ge,ci as sl,cj as Je,ck as Qe,cl as il,cm as dl,cn as cl,a4 as ul,bA as rl}from"./index-BtQArEjb.js";import{R as pl}from"./index-CHGDm93g-D7uerUmy.js";import{n as Xe,o as Ye}from"./arrays-DzE3CxMO-CDtVJKij.js";import{L as pa}from"./cloneDeep-jNMVizYp-BpbwiFL8.js";var hl=1/0;function vl(e){var t=e==null?0:e.length;return t?tl(e,hl):[]}var fl=se({name:"NodeContent",setup(){return{ns:ue("cascader-node")}},render(){const{ns:e}=this,{node:t,panel:n}=this.$parent,{data:l,label:s}=t,{renderLabelFn:p}=n;return rl("span",{class:e.e("label")},p?p({node:t,data:l}):s)}});const Pe=Symbol(),ml=se({name:"ElCascaderNode",components:{ElCheckbox:cl,ElRadio:pl,NodeContent:fl,ElIcon:he,Check:ca,Loading:ua,ArrowRight:ul},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:t}){const n=ra(Pe),l=ue("cascader-node"),s=m(()=>n.isHoverMenu),p=m(()=>n.config.multiple),r=m(()=>n.config.checkStrictly),f=m(()=>{var C;return(C=n.checkedNodes[0])==null?void 0:C.uid}),u=m(()=>e.node.isDisabled),b=m(()=>e.node.isLeaf),y=m(()=>r.value&&!b.value||!u.value),V=m(()=>ae(n.expandingNode)),_=m(()=>r.value&&n.checkedNodes.some(ae)),ae=C=>{var E;const{level:O,uid:le}=e.node;return((E=C==null?void 0:C.pathNodes[O-1])==null?void 0:E.uid)===le},U=()=>{V.value||n.expandNode(e.node)},A=C=>{const{node:E}=e;C!==E.checked&&n.handleCheckChange(E,C)},H=()=>{n.lazyLoad(e.node,()=>{b.value||U()})},I=C=>{s.value&&(K(),!b.value&&t("expand",C))},K=()=>{const{node:C}=e;!y.value||C.loading||(C.loaded?U():H())},L=()=>{s.value&&!b.value||(b.value&&!u.value&&!r.value&&!p.value?T(!0):K())},Z=C=>{r.value?(A(C),e.node.loaded&&U()):T(C)},T=C=>{e.node.loaded?(A(C),!r.value&&U()):H()};return{panel:n,isHoverMenu:s,multiple:p,checkStrictly:r,checkedNodeId:f,isDisabled:u,isLeaf:b,expandable:y,inExpandingPath:V,inCheckedPath:_,ns:l,handleHoverExpand:I,handleExpand:K,handleClick:L,handleCheck:T,handleSelectCheck:Z}}});function gl(e,t,n,l,s,p){const r=j("el-checkbox"),f=j("el-radio"),u=j("check"),b=j("el-icon"),y=j("node-content"),V=j("loading"),_=j("arrow-right");return v(),z("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!e.isLeaf,"aria-owns":e.isLeaf?null:e.menuId,"aria-expanded":e.inExpandingPath,tabindex:e.expandable?-1:void 0,class:S([e.ns.b(),e.ns.is("selectable",e.checkStrictly),e.ns.is("active",e.node.checked),e.ns.is("disabled",!e.expandable),e.inExpandingPath&&"in-active-path",e.inCheckedPath&&"in-checked-path"]),onMouseenter:e.handleHoverExpand,onFocus:e.handleHoverExpand,onClick:e.handleClick},[W(" prefix "),e.multiple?(v(),F(r,{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:e.isDisabled,onClick:ve(()=>{},["stop"]),"onUpdate:modelValue":e.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onClick","onUpdate:modelValue"])):e.checkStrictly?(v(),F(f,{key:1,"model-value":e.checkedNodeId,label:e.node.uid,disabled:e.isDisabled,"onUpdate:modelValue":e.handleSelectCheck,onClick:ve(()=>{},["stop"])},{default:D(()=>[W(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),ie("span")]),_:1},8,["model-value","label","disabled","onUpdate:modelValue","onClick"])):e.isLeaf&&e.node.checked?(v(),F(b,{key:2,class:S(e.ns.e("prefix"))},{default:D(()=>[G(u)]),_:1},8,["class"])):W("v-if",!0),W(" content "),G(y),W(" postfix "),e.isLeaf?W("v-if",!0):(v(),z(ce,{key:3},[e.node.loading?(v(),F(b,{key:0,class:S([e.ns.is("loading"),e.ns.e("postfix")])},{default:D(()=>[G(V)]),_:1},8,["class"])):(v(),F(b,{key:1,class:S(["arrow-right",e.ns.e("postfix")])},{default:D(()=>[G(_)]),_:1},8,["class"]))],64))],42,["id","aria-haspopup","aria-owns","aria-expanded","tabindex","onMouseenter","onFocus","onClick"])}var bl=Ee(ml,[["render",gl],["__file","node.vue"]]);const kl=se({name:"ElCascaderMenu",components:{Loading:ua,ElIcon:he,ElScrollbar:sa,ElCascaderNode:bl},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const t=nl(),n=ue("cascader-menu"),{t:l}=oa(),s=ol();let p=null,r=null;const f=ra(Pe),u=$(null),b=m(()=>!e.nodes.length),y=m(()=>!f.initialLoaded),V=m(()=>`${s.value}-${e.index}`),_=H=>{p=H.target},ae=H=>{if(!(!f.isHoverMenu||!p||!u.value))if(p.contains(H.target)){U();const I=t.vnode.el,{left:K}=I.getBoundingClientRect(),{offsetWidth:L,offsetHeight:Z}=I,T=H.clientX-K,C=p.offsetTop,E=C+p.offsetHeight;u.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${T} ${C} L${L} 0 V${C} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${T} ${E} L${L} ${Z} V${E} Z" />
        `}else r||(r=window.setTimeout(A,f.config.hoverThreshold))},U=()=>{r&&(clearTimeout(r),r=null)},A=()=>{u.value&&(u.value.innerHTML="",U())};return{ns:n,panel:f,hoverZone:u,isEmpty:b,isLoading:y,menuId:V,t:l,handleExpand:_,handleMouseMove:ae,clearHoverZone:A}}});function yl(e,t,n,l,s,p){const r=j("el-cascader-node"),f=j("loading"),u=j("el-icon"),b=j("el-scrollbar");return v(),F(b,{key:e.menuId,tag:"ul",role:"menu",class:S(e.ns.b()),"wrap-class":e.ns.e("wrap"),"view-class":[e.ns.e("list"),e.ns.is("empty",e.isEmpty)],onMousemove:e.handleMouseMove,onMouseleave:e.clearHoverZone},{default:D(()=>{var y;return[(v(!0),z(ce,null,fe(e.nodes,V=>(v(),F(r,{key:V.uid,node:V,"menu-id":e.menuId,onExpand:e.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),e.isLoading?(v(),z("div",{key:0,class:S(e.ns.e("empty-text"))},[G(u,{size:"14",class:S(e.ns.is("loading"))},{default:D(()=>[G(f)]),_:1},8,["class"]),We(" "+ne(e.t("el.cascader.loading")),1)],2)):e.isEmpty?(v(),z("div",{key:1,class:S(e.ns.e("empty-text"))},[we(e.$slots,"empty",{},()=>[We(ne(e.t("el.cascader.noData")),1)])],2)):(y=e.panel)!=null&&y.isHoverMenu?(v(),z("svg",{key:2,ref:"hoverZone",class:S(e.ns.e("hover-zone"))},null,2)):W("v-if",!0)]}),_:3},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var Cl=Ee(kl,[["render",yl],["__file","menu.vue"]]);let xl=0;const Nl=e=>{const t=[e];let{parent:n}=e;for(;n;)t.unshift(n),n=n.parent;return t};class re{constructor(t,n,l,s=!1){this.data=t,this.config=n,this.parent=l,this.root=s,this.uid=xl++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:p,label:r,children:f}=n,u=t[f],b=Nl(this);this.level=s?0:l?l.level+1:1,this.value=t[p],this.label=t[r],this.pathNodes=b,this.pathValues=b.map(y=>y.value),this.pathLabels=b.map(y=>y.label),this.childrenData=u,this.children=(u||[]).map(y=>new re(y,n,this)),this.loaded=!n.lazy||this.isLeaf||!Me(u)}get isDisabled(){const{data:t,parent:n,config:l}=this,{disabled:s,checkStrictly:p}=l;return(Ge(s)?s(t,this):!!t[s])||!p&&(n==null?void 0:n.isDisabled)}get isLeaf(){const{data:t,config:n,childrenData:l,loaded:s}=this,{lazy:p,leaf:r}=n,f=Ge(r)?r(t,this):t[r];return sl(f)?p&&!s?!1:!(Je(l)&&l.length):!!f}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(t){const{childrenData:n,children:l}=this,s=new re(t,this.config,this);return Je(n)?n.push(t):this.childrenData=[t],l.push(s),s}calcText(t,n){const l=t?this.pathLabels.join(n):this.label;return this.text=l,l}broadcast(t,...n){const l=`onParent${Qe(t)}`;this.children.forEach(s=>{s&&(s.broadcast(t,...n),s[l]&&s[l](...n))})}emit(t,...n){const{parent:l}=this,s=`onChild${Qe(t)}`;l&&(l[s]&&l[s](...n),l.emit(t,...n))}onParentCheck(t){this.isDisabled||this.setCheckState(t)}onChildCheck(){const{children:t}=this,n=t.filter(s=>!s.isDisabled),l=n.length?n.every(s=>s.checked):!1;this.setCheckState(l)}setCheckState(t){const n=this.children.length,l=this.children.reduce((s,p)=>{const r=p.checked?1:p.indeterminate?.5:0;return s+r},0);this.checked=this.loaded&&this.children.filter(s=>!s.isDisabled).every(s=>s.loaded&&s.checked)&&t,this.indeterminate=this.loaded&&l!==n&&l>0}doCheck(t){if(this.checked===t)return;const{checkStrictly:n,multiple:l}=this.config;n||!l?this.checked=t:(this.broadcast("check",t),this.setCheckState(t),this.emit("check"))}}const Be=(e,t)=>e.reduce((n,l)=>(l.isLeaf?n.push(l):(!t&&n.push(l),n=n.concat(Be(l.children,t))),n),[]);class ea{constructor(t,n){this.config=n;const l=(t||[]).map(s=>new re(s,this.config));this.nodes=l,this.allNodes=Be(l,!1),this.leafNodes=Be(l,!0)}getNodes(){return this.nodes}getFlattedNodes(t){return t?this.leafNodes:this.allNodes}appendNode(t,n){const l=n?n.appendChild(t):new re(t,this.config);n||this.nodes.push(l),this.allNodes.push(l),l.isLeaf&&this.leafNodes.push(l)}appendNodes(t,n){t.forEach(l=>this.appendNode(l,n))}getNodeByValue(t,n=!1){return!t&&t!==0?null:this.getFlattedNodes(n).find(l=>me(l.value,t)||me(l.pathValues,t))||null}getSameNode(t){return t&&this.getFlattedNodes(!1).find(({value:n,level:l})=>me(t.value,n)&&t.level===l)||null}}const ha=la({modelValue:{type:oe([Number,String,Array])},options:{type:oe(Array),default:()=>[]},props:{type:oe(Object),default:()=>({})}}),wl={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:il,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},El=e=>m(()=>({...wl,...e.props})),aa=e=>{if(!e)return 0;const t=e.id.split("-");return Number(t[t.length-2])},$l=e=>{if(!e)return;const t=e.querySelector("input");t?t.click():dl(e)&&e.click()},Sl=(e,t)=>{const n=t.slice(0),l=n.map(p=>p.uid),s=e.reduce((p,r)=>{const f=l.indexOf(r.uid);return f>-1&&(p.push(r),n.splice(f,1),l.splice(f,1)),p},[]);return s.push(...n),s},Tl=se({name:"ElCascaderPanel",components:{ElCascaderMenu:Cl},props:{...ha,border:{type:Boolean,default:!0},renderLabel:Function},emits:[xe,Ne,"close","expand-change"],setup(e,{emit:t,slots:n}){let l=!1;const s=ue("cascader"),p=El(e);let r=null;const f=$(!0),u=$([]),b=$(null),y=$([]),V=$(null),_=$([]),ae=m(()=>p.value.expandTrigger==="hover"),U=m(()=>e.renderLabel||n.default),A=()=>{const{options:c}=e,h=p.value;l=!1,r=new ea(c,h),y.value=[r.getNodes()],h.lazy&&Me(e.options)?(f.value=!1,H(void 0,k=>{k&&(r=new ea(k,h),y.value=[r.getNodes()]),f.value=!0,O(!1,!0)})):O(!1,!0)},H=(c,h)=>{const k=p.value;c=c||new re({},k,void 0,!0),c.loading=!0;const g=x=>{const w=c,q=w.root?null:w;x&&(r==null||r.appendNodes(x,q)),w.loading=!1,w.loaded=!0,w.childrenData=w.childrenData||[],h&&h(x)};k.lazyLoad(c,g)},I=(c,h)=>{var k;const{level:g}=c,x=y.value.slice(0,g);let w;c.isLeaf?w=c.pathNodes[g-2]:(w=c,x.push(c.children)),((k=V.value)==null?void 0:k.uid)!==(w==null?void 0:w.uid)&&(V.value=c,y.value=x,!h&&t("expand-change",(c==null?void 0:c.pathValues)||[]))},K=(c,h,k=!0)=>{const{checkStrictly:g,multiple:x}=p.value,w=_.value[0];l=!0,!x&&(w==null||w.doCheck(!1)),c.doCheck(h),E(),k&&!x&&!g&&t("close"),!k&&!x&&!g&&L(c)},L=c=>{c&&(c=c.parent,L(c),c&&I(c))},Z=c=>r==null?void 0:r.getFlattedNodes(c),T=c=>{var h;return(h=Z(c))==null?void 0:h.filter(k=>k.checked!==!1)},C=()=>{_.value.forEach(c=>c.doCheck(!1)),E(),y.value=y.value.slice(0,1),V.value=null,t("expand-change",[])},E=()=>{var c;const{checkStrictly:h,multiple:k}=p.value,g=_.value,x=T(!h),w=Sl(g,x),q=w.map(M=>M.valueByOption);_.value=w,b.value=k?q:(c=q[0])!=null?c:null},O=(c=!1,h=!1)=>{const{modelValue:k}=e,{lazy:g,multiple:x,checkStrictly:w}=p.value,q=!w;if(!(!f.value||l||!h&&me(k,b.value)))if(g&&!c){const M=Xe(vl(Ye(k))).map(B=>r==null?void 0:r.getNodeByValue(B)).filter(B=>!!B&&!B.loaded&&!B.loading);M.length?M.forEach(B=>{H(B,()=>O(!1,h))}):O(!0,h)}else{const M=x?Ye(k):[k],B=Xe(M.map(ge=>r==null?void 0:r.getNodeByValue(ge,q)));le(B,h),b.value=pa(k)}},le=(c,h=!0)=>{const{checkStrictly:k}=p.value,g=_.value,x=c.filter(M=>!!M&&(k||M.isLeaf)),w=r==null?void 0:r.getSameNode(V.value),q=h&&w||x[0];q?q.pathNodes.forEach(M=>I(M,!0)):V.value=null,g.forEach(M=>M.doCheck(!1)),Re(x).forEach(M=>M.doCheck(!0)),_.value=x,de(J)},J=()=>{ia&&u.value.forEach(c=>{const h=c==null?void 0:c.$el;if(h){const k=h.querySelector(`.${s.namespace.value}-scrollbar__wrap`),g=h.querySelector(`.${s.b("node")}.${s.is("active")}`)||h.querySelector(`.${s.b("node")}.in-active-path`);el(k,g)}})},X=c=>{const h=c.target,{code:k}=c;switch(k){case P.up:case P.down:{c.preventDefault();const g=k===P.up?-1:1;Ce(da(h,g,`.${s.b("node")}[tabindex="-1"]`));break}case P.left:{c.preventDefault();const g=u.value[aa(h)-1],x=g==null?void 0:g.$el.querySelector(`.${s.b("node")}[aria-expanded="true"]`);Ce(x);break}case P.right:{c.preventDefault();const g=u.value[aa(h)+1],x=g==null?void 0:g.$el.querySelector(`.${s.b("node")}[tabindex="-1"]`);Ce(x);break}case P.enter:case P.numpadEnter:$l(h);break}};return Va(Pe,Re({config:p,expandingNode:V,checkedNodes:_,isHoverMenu:ae,initialLoaded:f,renderLabelFn:U,lazyLoad:H,expandNode:I,handleCheckChange:K})),te([p,()=>e.options],A,{deep:!0,immediate:!0}),te(()=>e.modelValue,()=>{l=!1,O()},{deep:!0}),te(()=>b.value,c=>{me(c,e.modelValue)||(t(xe,c),t(Ne,c))}),_a(()=>u.value=[]),ta(()=>!Me(e.modelValue)&&O()),{ns:s,menuList:u,menus:y,checkedNodes:_,handleKeyDown:X,handleCheckChange:K,getFlattedNodes:Z,getCheckedNodes:T,clearCheckedNodes:C,calculateCheckedValue:E,scrollToExpandingNode:J}}});function Vl(e,t,n,l,s,p){const r=j("el-cascader-menu");return v(),z("div",{class:S([e.ns.b("panel"),e.ns.is("bordered",e.border)]),onKeydown:e.handleKeyDown},[(v(!0),z(ce,null,fe(e.menus,(f,u)=>(v(),F(r,{key:u,ref_for:!0,ref:b=>e.menuList[u]=b,index:u,nodes:[...f]},{empty:D(()=>[we(e.$slots,"empty")]),_:2},1032,["index","nodes"]))),128))],42,["onKeydown"])}var _l=Ee(Tl,[["render",Vl],["__file","index.vue"]]);const Ll=na(_l),Dl=la({...ha,size:La,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:oe(Function),default:(e,t)=>e.text.includes(t)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:oe(Function),default:()=>!0},placement:{type:oe(String),values:Da,default:"bottom-start"},fallbackPlacements:{type:oe(Array),default:["bottom-start","bottom","top-start","top","right","left"]},popperClass:{type:String,default:""},teleported:Ma.teleported,tagType:{...Ue.type,default:"info"},tagEffect:{...Ue.effect,default:"light"},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...Ba}),Ml={[xe]:e=>!0,[Ne]:e=>!0,focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,visibleChange:e=>al(e),expandChange:e=>!!e,removeTag:e=>!!e},Bl="ElCascader",Pl=se({name:Bl}),zl=se({...Pl,props:Dl,emits:Ml,setup(e,{expose:t,emit:n}){const l=e,s={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:a})=>{const{modifiersData:o,placement:i}=a;["right","left","bottom","top"].includes(i)||(o.arrow.x=35)},requires:["arrow"]}]},p=Pa();let r=0,f=0;const u=ue("cascader"),b=ue("input"),{t:y}=oa(),{form:V,formItem:_}=za(),{valueOnClear:ae}=Fa(l),{isComposing:U,handleComposition:A}=Ha({afterComposition(a){var o;const i=(o=a.target)==null?void 0:o.value;De(i)}}),H=$(null),I=$(null),K=$(null),L=$(null),Z=$(null),T=$(!1),C=$(!1),E=$(!1),O=$(!1),le=$(""),J=$(""),X=$([]),c=$([]),h=$([]),k=m(()=>p.style),g=m(()=>l.disabled||(V==null?void 0:V.disabled)),x=m(()=>l.placeholder||y("el.cascader.placeholder")),w=m(()=>J.value||X.value.length>0||U.value?"":x.value),q=Aa(),M=m(()=>q.value==="small"?"small":"default"),B=m(()=>!!l.props.multiple),ge=m(()=>!l.filterable||B.value),ze=m(()=>B.value?J.value:le.value),be=m(()=>{var a;return((a=L.value)==null?void 0:a.checkedNodes)||[]}),va=m(()=>!l.clearable||g.value||E.value||!C.value?!1:!!be.value.length),ke=m(()=>{const{showAllLevels:a,separator:o}=l,i=be.value;return i.length?B.value?"":i[0].calcText(a,o):""}),fa=m(()=>(_==null?void 0:_.validateState)||""),$e=m({get(){return pa(l.modelValue)},set(a){const o=a??ae.value;n(xe,o),n(Ne,o),l.validateEvent&&(_==null||_.validate("change").catch(i=>Ia()))}}),ma=m(()=>[u.b(),u.m(q.value),u.is("disabled",g.value),p.class]),ga=m(()=>[b.e("icon"),"icon-arrow-down",u.is("reverse",T.value)]),ba=m(()=>u.is("focus",T.value||O.value)),Fe=m(()=>{var a,o;return(o=(a=H.value)==null?void 0:a.popperRef)==null?void 0:o.contentRef}),R=a=>{var o,i,N;g.value||(a=a??!T.value,a!==T.value&&(T.value=a,(i=(o=I.value)==null?void 0:o.input)==null||i.setAttribute("aria-expanded",`${a}`),a?(pe(),de((N=L.value)==null?void 0:N.scrollToExpandingNode)):l.filterable&&Le(),n("visibleChange",a)))},pe=()=>{de(()=>{var a;(a=H.value)==null||a.updatePopper()})},Se=()=>{E.value=!1},Te=a=>{const{showAllLevels:o,separator:i}=l;return{node:a,key:a.uid,text:a.calcText(o,i),hitState:!1,closable:!g.value&&!a.isDisabled,isCollapseTag:!1}},Ve=a=>{var o;const i=a.node;i.doCheck(!1),(o=L.value)==null||o.calculateCheckedValue(),n("removeTag",i.valueByOption)},ka=()=>{if(!B.value)return;const a=be.value,o=[],i=[];if(a.forEach(N=>i.push(Te(N))),c.value=i,a.length){a.slice(0,l.maxCollapseTags).forEach(Q=>o.push(Te(Q)));const N=a.slice(l.maxCollapseTags),Y=N.length;Y&&(l.collapseTags?o.push({key:-1,text:`+ ${Y}`,closable:!1,isCollapseTag:!0}):N.forEach(Q=>o.push(Te(Q))))}X.value=o},He=()=>{var a,o;const{filterMethod:i,showAllLevels:N,separator:Y}=l,Q=(o=(a=L.value)==null?void 0:a.getFlattedNodes(!l.props.checkStrictly))==null?void 0:o.filter(ee=>ee.isDisabled?!1:(ee.calcText(N,Y),i(ee,ze.value)));B.value&&(X.value.forEach(ee=>{ee.hitState=!1}),c.value.forEach(ee=>{ee.hitState=!1})),E.value=!0,h.value=Q,pe()},ya=()=>{var a;let o;E.value&&Z.value?o=Z.value.$el.querySelector(`.${u.e("suggestion-item")}`):o=(a=L.value)==null?void 0:a.$el.querySelector(`.${u.b("node")}[tabindex="-1"]`),o&&(o.focus(),!E.value&&o.click())},_e=()=>{var a,o;const i=(a=I.value)==null?void 0:a.input,N=K.value,Y=(o=Z.value)==null?void 0:o.$el;if(!(!ia||!i)){if(Y){const Q=Y.querySelector(`.${u.e("suggestion-list")}`);Q.style.minWidth=`${i.offsetWidth}px`}if(N){const{offsetHeight:Q}=N,ee=X.value.length>0?`${Math.max(Q,r)-2}px`:`${r}px`;i.style.height=ee,pe()}}},Ca=a=>{var o;return(o=L.value)==null?void 0:o.getCheckedNodes(a)},xa=a=>{pe(),n("expandChange",a)},Na=a=>{if(!U.value)switch(a.code){case P.enter:case P.numpadEnter:R();break;case P.down:R(!0),de(ya),a.preventDefault();break;case P.esc:T.value===!0&&(a.preventDefault(),a.stopPropagation(),R(!1));break;case P.tab:R(!1);break}},wa=()=>{var a;(a=L.value)==null||a.clearCheckedNodes(),!T.value&&l.filterable&&Le(),R(!1),n("clear")},Le=()=>{const{value:a}=ke;le.value=a,J.value=a},Ea=a=>{var o,i;const{checked:N}=a;B.value?(o=L.value)==null||o.handleCheckChange(a,!N,!1):(!N&&((i=L.value)==null||i.handleCheckChange(a,!0,!1)),R(!1))},$a=a=>{const o=a.target,{code:i}=a;switch(i){case P.up:case P.down:{const N=i===P.up?-1:1;Ce(da(o,N,`.${u.e("suggestion-item")}[tabindex="-1"]`));break}case P.enter:case P.numpadEnter:o.click();break}},Sa=()=>{const a=X.value,o=a[a.length-1];f=J.value?0:f+1,!(!o||!f||l.collapseTags&&a.length>1)&&(o.hitState?Ve(o):o.hitState=!0)},Ae=a=>{const o=a.target,i=u.e("search-input");o.className===i&&(O.value=!0),n("focus",a)},Ie=a=>{O.value=!1,n("blur",a)},Ta=qa(()=>{const{value:a}=ze;if(!a)return;const o=l.beforeFilter(a);Ra(o)?o.then(He).catch(()=>{}):o!==!1?He():Se()},l.debounce),De=(a,o)=>{!T.value&&R(!0),!(o!=null&&o.isComposing)&&(a?Ta():Se())},qe=a=>Number.parseFloat(ll(b.cssVarName("input-height"),a).value)-2;return te(E,pe),te([be,g,()=>l.collapseTags],ka),te(X,()=>{de(()=>_e())}),te(q,async()=>{await de();const a=I.value.input;r=qe(a)||r,_e()}),te(ke,Le,{immediate:!0}),ta(()=>{const a=I.value.input,o=qe(a);r=a.offsetHeight||o,Ua(a,_e)}),t({getCheckedNodes:Ca,cascaderPanelRef:L,togglePopperVisible:R,contentRef:Fe,presentText:ke}),(a,o)=>(v(),F(d(je),{ref_key:"tooltipRef",ref:H,visible:T.value,teleported:a.teleported,"popper-class":[d(u).e("dropdown"),a.popperClass],"popper-options":s,"fallback-placements":a.fallbackPlacements,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:a.placement,transition:`${d(u).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:a.persistent,onHide:Se},{default:D(()=>[ye((v(),z("div",{class:S(d(ma)),style:Ja(d(k)),onClick:()=>R(d(ge)?void 0:!0),onKeydown:Na,onMouseenter:i=>C.value=!0,onMouseleave:i=>C.value=!1},[G(d(Za),{ref_key:"input",ref:I,modelValue:le.value,"onUpdate:modelValue":i=>le.value=i,placeholder:d(w),readonly:d(ge),disabled:d(g),"validate-event":!1,size:d(q),class:S(d(ba)),tabindex:d(B)&&a.filterable&&!d(g)?-1:void 0,onCompositionstart:d(A),onCompositionupdate:d(A),onCompositionend:d(A),onFocus:Ae,onBlur:Ie,onInput:De},{suffix:D(()=>[d(va)?(v(),F(d(he),{key:"clear",class:S([d(b).e("icon"),"icon-circle-close"]),onClick:ve(wa,["stop"])},{default:D(()=>[G(d(ja))]),_:1},8,["class","onClick"])):(v(),F(d(he),{key:"arrow-down",class:S(d(ga)),onClick:ve(i=>R(),["stop"])},{default:D(()=>[G(d(Ka))]),_:1},8,["class","onClick"]))]),_:1},8,["modelValue","onUpdate:modelValue","placeholder","readonly","disabled","size","class","tabindex","onCompositionstart","onCompositionupdate","onCompositionend"]),d(B)?(v(),z("div",{key:0,ref_key:"tagWrapper",ref:K,class:S([d(u).e("tags"),d(u).is("validate",!!d(fa))])},[(v(!0),z(ce,null,fe(X.value,i=>(v(),F(d(Ze),{key:i.key,type:a.tagType,size:d(M),effect:a.tagEffect,hit:i.hitState,closable:i.closable,"disable-transitions":"",onClose:N=>Ve(i)},{default:D(()=>[i.isCollapseTag===!1?(v(),z("span",{key:0},ne(i.text),1)):(v(),F(d(je),{key:1,disabled:T.value||!a.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:D(()=>[ie("span",null,ne(i.text),1)]),content:D(()=>[ie("div",{class:S(d(u).e("collapse-tags"))},[(v(!0),z(ce,null,fe(c.value.slice(a.maxCollapseTags),(N,Y)=>(v(),z("div",{key:Y,class:S(d(u).e("collapse-tag"))},[(v(),F(d(Ze),{key:N.key,class:"in-tooltip",type:a.tagType,size:d(M),effect:a.tagEffect,hit:N.hitState,closable:N.closable,"disable-transitions":"",onClose:Q=>Ve(N)},{default:D(()=>[ie("span",null,ne(N.text),1)]),_:2},1032,["type","size","effect","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","effect","hit","closable","onClose"]))),128)),a.filterable&&!d(g)?ye((v(),z("input",{key:0,"onUpdate:modelValue":i=>J.value=i,type:"text",class:S(d(u).e("search-input")),placeholder:d(ke)?"":d(x),onInput:i=>De(J.value,i),onClick:ve(i=>R(!0),["stop"]),onKeydown:Wa(Sa,["delete"]),onCompositionstart:d(A),onCompositionupdate:d(A),onCompositionend:d(A),onFocus:Ae,onBlur:Ie},null,42,["onUpdate:modelValue","placeholder","onInput","onClick","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend"])),[[Ga,J.value]]):W("v-if",!0)],2)):W("v-if",!0)],46,["onClick","onMouseenter","onMouseleave"])),[[d(Oa),()=>R(!1),d(Fe)]])]),content:D(()=>[ye(G(d(Ll),{ref_key:"cascaderPanelRef",ref:L,modelValue:d($e),"onUpdate:modelValue":i=>Qa($e)?$e.value=i:null,options:a.options,props:l.props,border:!1,"render-label":a.$slots.default,onExpandChange:xa,onClose:i=>a.$nextTick(()=>R(!1))},{empty:D(()=>[we(a.$slots,"empty")]),_:3},8,["modelValue","onUpdate:modelValue","options","props","render-label","onClose"]),[[Oe,!E.value]]),a.filterable?ye((v(),F(d(sa),{key:0,ref_key:"suggestionPanel",ref:Z,tag:"ul",class:S(d(u).e("suggestion-panel")),"view-class":d(u).e("suggestion-list"),onKeydown:$a},{default:D(()=>[h.value.length?(v(!0),z(ce,{key:0},fe(h.value,i=>(v(),z("li",{key:i.uid,class:S([d(u).e("suggestion-item"),d(u).is("checked",i.checked)]),tabindex:-1,onClick:N=>Ea(i)},[ie("span",null,ne(i.text),1),i.checked?(v(),F(d(he),{key:0},{default:D(()=>[G(d(ca))]),_:1})):W("v-if",!0)],10,["onClick"]))),128)):we(a.$slots,"empty",{key:1},()=>[ie("li",{class:S(d(u).e("empty-text"))},ne(d(y)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[Oe,E.value]]):W("v-if",!0)]),_:3},8,["visible","teleported","popper-class","fallback-placements","placement","transition","persistent"]))}});var Fl=Ee(zl,[["__file","cascader.vue"]]);const Hl=na(Fl),Ul=se({__name:"d-cascader",props:Ke({designData:{}},{modelValue:{},modelModifiers:{}}),emits:Ke(["change"],["update:modelValue"]),setup(e,{emit:t}){const n=e,l=t,s=Xa(e,"modelValue"),p=m(()=>n.designData.options);function r(f){l("change",f)}return(f,u)=>{const b=Hl;return v(),F(b,Ya(d(p),{modelValue:s.value,"onUpdate:modelValue":u[0]||(u[0]=y=>s.value=y),clearable:d(p).clearable??!0,filterable:d(p).filterable??!0,onChange:r}),null,16,["modelValue","clearable","filterable"])}}});export{Ul as default};
